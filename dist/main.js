!function webpackUniversalModuleDefinition(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("lodash"),require("react")):"function"==typeof define&&define.amd?define(["_","react"],e):"object"==typeof exports?exports["storm-react-diagrams"]=e(require("lodash"),require("react")):t["storm-react-diagrams"]=e(t._,t.React)}("undefined"!=typeof self?self:this,function(t,e){return function(t){function __webpack_require__(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}var e={};return __webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,o){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=25)}([function(e,o){e.exports=t},function(t,e){var o={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4};t.exports=o},function(t,o){t.exports=e},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}(),r=this&&this.__assign||Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=o(2),a=function(t){function BaseWidget(e,o){var n=t.call(this,o)||this;return n.className=e,n}return n(BaseWidget,t),BaseWidget.prototype.bem=function(t){return(this.props.baseClass||this.className)+t+" "},BaseWidget.prototype.getClassName=function(){return(this.props.baseClass||this.className)+" "+(this.props.className?this.props.className+" ":"")},BaseWidget.prototype.getProps=function(){return r({},this.props.extraProps||{},{className:this.getClassName()})},BaseWidget}(i.Component);e.BaseWidget=a},function(t,e){function backtrace(t){for(var e=[[t.x,t.y]];t.parent;)t=t.parent,e.push([t.x,t.y]);return e.reverse()}function biBacktrace(t,e){var o=backtrace(t),n=backtrace(e);return o.concat(n.reverse())}function pathLength(t){var e,o,n,r,i,a=0;for(e=1;e<t.length;++e)o=t[e-1],n=t[e],r=o[0]-n[0],i=o[1]-n[1],a+=Math.sqrt(r*r+i*i);return a}function interpolate(t,e,o,n){var r,i,a,s,l,c,u=Math.abs,p=[];for(a=u(o-t),s=u(n-e),r=t<o?1:-1,i=e<n?1:-1,l=a-s;;){if(p.push([t,e]),t===o&&e===n)break;c=2*l,c>-s&&(l-=s,t+=r),c<a&&(l+=a,e+=i)}return p}function expandPath(t){var e,o,n,r,i,a,s=[],l=t.length;if(l<2)return s;for(i=0;i<l-1;++i)for(e=t[i],o=t[i+1],n=interpolate(e[0],e[1],o[0],o[1]),r=n.length,a=0;a<r-1;++a)s.push(n[a]);return s.push(t[l-1]),s}function smoothenPath(t,e){var o,n,r,i,a,s,l,c,u,p,d,f=e.length,h=e[0][0],g=e[0][1],y=e[f-1][0],m=e[f-1][1];for(o=h,n=g,a=[[o,n]],s=2;s<f;++s){for(c=e[s],r=c[0],i=c[1],u=interpolate(o,n,r,i),d=!1,l=1;l<u.length;++l)if(p=u[l],!t.isWalkableAt(p[0],p[1])){d=!0;break}d&&(lastValidCoord=e[s-1],a.push(lastValidCoord),o=lastValidCoord[0],n=lastValidCoord[1])}return a.push([y,m]),a}function compressPath(t){if(t.length<3)return t;var e,o,n,r,i,a,s=[],l=t[0][0],c=t[0][1],u=t[1][0],p=t[1][1],d=u-l,f=p-c;for(i=Math.sqrt(d*d+f*f),d/=i,f/=i,s.push([l,c]),a=2;a<t.length;a++)e=u,o=p,n=d,r=f,u=t[a][0],p=t[a][1],d=u-e,f=p-o,i=Math.sqrt(d*d+f*f),d/=i,f/=i,d===n&&f===r||s.push([e,o]);return s.push([u,p]),s}e.backtrace=backtrace,e.biBacktrace=biBacktrace,e.pathLength=pathLength,e.interpolate=interpolate,e.expandPath=expandPath,e.smoothenPath=smoothenPath,e.compressPath=compressPath},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(46),r=o(11),i=o(65),a=function(){function Toolkit(){}return Toolkit.UID=function(){return Toolkit.TESTING?""+ ++Toolkit.TESTING_UID:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},Toolkit.closest=function(t,e){return document.body.closest?t.closest(e):n(t,e)},Toolkit.generateLinePath=function(t,e){return"M"+t.x+","+t.y+" L "+e.x+","+e.y},Toolkit.generateCurvePath=function(t,e,o){void 0===o&&(o=0);var n=Math.abs(t.x-e.x)>Math.abs(t.y-e.y),r=n?o:0,i=n?0:o;return"M"+t.x+","+t.y+" C "+(t.x+r)+","+(t.y+i)+"\n    "+(e.x-r)+","+(e.y-i)+" "+e.x+","+e.y},Toolkit.generateDynamicPath=function(t){var e=i();return e=e.moveto(t[0][0]*r.ROUTING_SCALING_FACTOR,t[0][1]*r.ROUTING_SCALING_FACTOR),t.slice(1).forEach(function(t){e=e.lineto(t[0]*r.ROUTING_SCALING_FACTOR,t[1]*r.ROUTING_SCALING_FACTOR)}),e.print()},Toolkit.TESTING=!1,Toolkit.TESTING_UID=0,Toolkit}();e.Toolkit=a},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}(),r=this&&this.__assign||Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=o(14),a=o(0),s=function(t){function BaseModel(e,o){var n=t.call(this,o)||this;return n.type=e,n.selected=!1,n}return n(BaseModel,t),BaseModel.prototype.getParent=function(){return this.parent},BaseModel.prototype.setParent=function(t){this.parent=t},BaseModel.prototype.getSelectedEntities=function(){return this.isSelected()?[this]:[]},BaseModel.prototype.deSerialize=function(e,o){t.prototype.deSerialize.call(this,e,o),this.type=e.type,this.selected=e.selected},BaseModel.prototype.serialize=function(){return a.merge(t.prototype.serialize.call(this),{type:this.type,selected:this.selected})},BaseModel.prototype.getType=function(){return this.type},BaseModel.prototype.getID=function(){return this.id},BaseModel.prototype.isSelected=function(){return this.selected},BaseModel.prototype.setSelected=function(t){void 0===t&&(t=!0),this.selected=t,this.iterateListeners(function(e,o){e.selectionChanged&&e.selectionChanged(r({},o,{isSelected:t}))})},BaseModel.prototype.remove=function(){this.iterateListeners(function(t,e){t.entityRemoved&&t.entityRemoved(e)})},BaseModel}(i.BaseEntity);e.BaseModel=s},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(6),i=o(0),a=function(t){function PointModel(e,o){var n=t.call(this)||this;return n.x=o.x,n.y=o.y,n.parent=e,n}return n(PointModel,t),PointModel.prototype.getSelectedEntities=function(){return t.prototype.isSelected.call(this)&&!this.isConnectedToPort()?[this]:[]},PointModel.prototype.isConnectedToPort=function(){return null!==this.parent.getPortForPoint(this)},PointModel.prototype.getLink=function(){return this.getParent()},PointModel.prototype.deSerialize=function(e,o){t.prototype.deSerialize.call(this,e,o),this.x=e.x,this.y=e.y},PointModel.prototype.serialize=function(){return i.merge(t.prototype.serialize.call(this),{x:this.x,y:this.y})},PointModel.prototype.remove=function(){this.parent&&this.parent.removePoint(this),t.prototype.remove.call(this)},PointModel.prototype.updateLocation=function(t){this.x=t.x,this.y=t.y},PointModel.prototype.getX=function(){return this.x},PointModel.prototype.getY=function(){return this.y},PointModel.prototype.isLocked=function(){return t.prototype.isLocked.call(this)||this.getParent().isLocked()},PointModel}(r.BaseModel);e.PointModel=a},function(t,e){t.exports={manhattan:function(t,e){return t+e},euclidean:function(t,e){return Math.sqrt(t*t+e*e)},octile:function(t,e){var o=Math.SQRT2-1;return t<e?o*t+e:o*e+t},chebyshev:function(t,e){return Math.max(t,e)}}},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(6),i=o(0),a=function(t){function NodeModel(e,o){void 0===e&&(e="default");var n=t.call(this,e,o)||this;return n.x=0,n.y=0,n.extras={},n.ports={},n}return n(NodeModel,t),NodeModel.prototype.setPosition=function(t,e){var o=this.x,n=this.y;i.forEach(this.ports,function(r){i.forEach(r.getLinks(),function(i){var a=i.getPointForPort(r);a.x=a.x+t-o,a.y=a.y+e-n})}),this.x=t,this.y=e},NodeModel.prototype.getSelectedEntities=function(){var e=t.prototype.getSelectedEntities.call(this);return this.isSelected()&&i.forEach(this.ports,function(t){e=e.concat(i.map(t.getLinks(),function(e){return e.getPointForPort(t)}))}),e},NodeModel.prototype.deSerialize=function(e,o){var n=this;t.prototype.deSerialize.call(this,e,o),this.x=e.x,this.y=e.y,this.extras=e.extras,i.forEach(e.ports,function(t){var e=o.getPortFactory(t.type).getNewInstance();e.deSerialize(t,o),n.addPort(e)})},NodeModel.prototype.serialize=function(){return i.merge(t.prototype.serialize.call(this),{x:this.x,y:this.y,extras:this.extras,ports:i.map(this.ports,function(t){return t.serialize()})})},NodeModel.prototype.doClone=function(t,e){void 0===t&&(t={}),e.ports={},i.forEach(this.ports,function(o){e.addPort(o.clone(t))})},NodeModel.prototype.remove=function(){t.prototype.remove.call(this),i.forEach(this.ports,function(t){i.forEach(t.getLinks(),function(t){t.remove()})})},NodeModel.prototype.getPortFromID=function(t){for(var e in this.ports)if(this.ports[e].id===t)return this.ports[e];return null},NodeModel.prototype.getPort=function(t){return this.ports[t]},NodeModel.prototype.getPorts=function(){return this.ports},NodeModel.prototype.removePort=function(t){this.ports[t.name]&&(this.ports[t.name].setParent(null),delete this.ports[t.name])},NodeModel.prototype.addPort=function(t){return t.setParent(this),this.ports[t.name]=t,t},NodeModel.prototype.updateDimensions=function(t){var e=t.width,o=t.height;this.width=e,this.height=o},NodeModel}(r.BaseModel);e.NodeModel=a},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function AbstractFactory(t){this.type=t}return AbstractFactory.prototype.getType=function(){return this.type},AbstractFactory}();e.AbstractFactory=n},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(48);e.ROUTING_SCALING_FACTOR=5;var r=new n.JumpPointFinder({heuristic:n.Heuristic.manhattan,diagonalMovement:n.DiagonalMovement.Never}),i=function(){function PathFinding(t){this.instance=r,this.diagramEngine=t}return PathFinding.prototype.calculateDirectPath=function(t,o){var i=this.diagramEngine.getCanvasMatrix(),a=new n.Grid(i);return r.findPath(this.diagramEngine.translateRoutingX(Math.floor(t.x/e.ROUTING_SCALING_FACTOR)),this.diagramEngine.translateRoutingY(Math.floor(t.y/e.ROUTING_SCALING_FACTOR)),this.diagramEngine.translateRoutingX(Math.floor(o.x/e.ROUTING_SCALING_FACTOR)),this.diagramEngine.translateRoutingY(Math.floor(o.y/e.ROUTING_SCALING_FACTOR)),a)},PathFinding.prototype.calculateLinkStartEndCoords=function(t,e){var o=e.findIndex(function(e){return 0===t[e[1]][e[0]]}),n=e.length-1-e.slice().reverse().findIndex(function(e){return 0===t[e[1]][e[0]]});if(-1!==o&&-1!==n){var r=e.slice(0,o),i=e.slice(n);return{start:{x:e[o][0],y:e[o][1]},end:{x:e[n][0],y:e[n][1]},pathToStart:r,pathToEnd:i}}},PathFinding.prototype.calculateDynamicPath=function(t,e,o,i,a){var s=this,l=new n.Grid(t),c=r.findPath(e.x,e.y,o.x,o.y,l),u=i.concat(c,a).map(function(t){return[s.diagramEngine.translateRoutingX(t[0],!0),s.diagramEngine.translateRoutingY(t[1],!0)]});return n.Util.compressPath(u)},PathFinding}();e.default=i},function(t,e,o){t.exports=o(50)},function(t,e,o){function JumpPointFinderBase(t){t=t||{},this.heuristic=t.heuristic||i.manhattan,this.trackJumpRecursion=t.trackJumpRecursion||!1}var n=o(12),r=o(4),i=o(8);o(1);JumpPointFinderBase.prototype.findPath=function(t,e,o,i,a){var s,l=this.openList=new n(function(t,e){return t.f-e.f}),c=this.startNode=a.getNodeAt(t,e),u=this.endNode=a.getNodeAt(o,i);for(this.grid=a,c.g=0,c.f=0,l.push(c),c.opened=!0;!l.empty();){if(s=l.pop(),s.closed=!0,s===u)return r.expandPath(r.backtrace(u));this._identifySuccessors(s)}return[]},JumpPointFinderBase.prototype._identifySuccessors=function(t){var e,o,n,r,a,s,l,c,u,p,d=this.grid,f=this.heuristic,h=this.openList,g=this.endNode.x,y=this.endNode.y,m=t.x,_=t.y,v=Math.abs;Math.max;for(e=this._findNeighbors(t),r=0,a=e.length;r<a;++r)if(o=e[r],n=this._jump(o[0],o[1],m,_)){if(s=n[0],l=n[1],p=d.getNodeAt(s,l),p.closed)continue;c=i.octile(v(s-m),v(l-_)),u=t.g+c,(!p.opened||u<p.g)&&(p.g=u,p.h=p.h||f(v(s-g),v(l-y)),p.f=p.g+p.h,p.parent=t,p.opened?h.updateItem(p):(h.push(p),p.opened=!0))}},t.exports=JumpPointFinderBase},function(t,e,o){"use strict";var n=this&&this.__assign||Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var r=o(5),i=o(0),a=function(){function BaseEntity(t){this.listeners={},this.id=t||r.Toolkit.UID(),this.locked=!1}return BaseEntity.prototype.getID=function(){return this.id},BaseEntity.prototype.doClone=function(t,e){void 0===t&&(t={})},BaseEntity.prototype.clone=function(t){if(void 0===t&&(t={}),t[this.id])return t[this.id];var e=i.clone(this);return e.id=r.Toolkit.UID(),e.clearListeners(),t[this.id]=e,this.doClone(t,e),e},BaseEntity.prototype.clearListeners=function(){this.listeners={}},BaseEntity.prototype.deSerialize=function(t,e){this.id=t.id},BaseEntity.prototype.serialize=function(){return{id:this.id}},BaseEntity.prototype.iterateListeners=function(t){var e={id:r.Toolkit.UID(),firing:!0,entity:this,stopPropagation:function(){e.firing=!1}};for(var o in this.listeners)if(this.listeners.hasOwnProperty(o)){if(!e.firing)return;t(this.listeners[o],e)}},BaseEntity.prototype.removeListener=function(t){return!!this.listeners[t]&&(delete this.listeners[t],!0)},BaseEntity.prototype.addListener=function(t){var e=r.Toolkit.UID();return this.listeners[e]=t,e},BaseEntity.prototype.isLocked=function(){return this.locked},BaseEntity.prototype.setLocked=function(t){void 0===t&&(t=!0),this.locked=t,this.iterateListeners(function(e,o){e.lockChanged&&e.lockChanged(n({},o,{locked:t}))})},BaseEntity}();e.BaseEntity=a},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(6),i=o(0),a=function(t){function PortModel(e,o,n,r){var i=t.call(this,o,n)||this;return i.name=e,i.links={},i.maximumLinks=r,i}return n(PortModel,t),PortModel.prototype.deSerialize=function(e,o){t.prototype.deSerialize.call(this,e,o),this.name=e.name,this.maximumLinks=e.maximumLinks},PortModel.prototype.serialize=function(){return i.merge(t.prototype.serialize.call(this),{name:this.name,parentNode:this.parent.id,links:i.map(this.links,function(t){return t.id}),maximumLinks:this.maximumLinks})},PortModel.prototype.doClone=function(t,e){void 0===t&&(t={}),e.links={},e.parentNode=this.getParent().clone(t)},PortModel.prototype.getNode=function(){return this.getParent()},PortModel.prototype.getName=function(){return this.name},PortModel.prototype.getMaximumLinks=function(){return this.maximumLinks},PortModel.prototype.setMaximumLinks=function(t){this.maximumLinks=t},PortModel.prototype.removeLink=function(t){delete this.links[t.getID()]},PortModel.prototype.addLink=function(t){this.links[t.getID()]=t},PortModel.prototype.getLinks=function(){return this.links},PortModel.prototype.createLinkModel=function(){if(i.isFinite(this.maximumLinks)){var t=i.size(this.links);if(1===this.maximumLinks&&t>=1)return i.values(this.links)[0];if(t>=this.maximumLinks)return null}return null},PortModel.prototype.updateCoords=function(t){var e=t.x,o=t.y,n=t.width,r=t.height;this.x=e,this.y=o,this.width=n,this.height=r},PortModel.prototype.canLinkToPort=function(t){return!0},PortModel.prototype.isLocked=function(){return t.prototype.isLocked.call(this)||this.getParent().isLocked()},PortModel}(r.BaseModel);e.PortModel=a},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function BaseAction(t,e){this.mouseX=t,this.mouseY=e,this.ms=(new Date).getTime()}return BaseAction}();e.BaseAction=n},function(t,e){function Node(t,e,o){this.x=t,this.y=e,this.walkable=void 0===o||o}t.exports=Node},function(t,e,o){function AStarFinder(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.heuristic=t.heuristic||i.manhattan,this.weight=t.weight||1,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=a.OnlyWhenNoObstacles:this.diagonalMovement=a.IfAtMostOneObstacle:this.diagonalMovement=a.Never),this.diagonalMovement===a.Never?this.heuristic=t.heuristic||i.manhattan:this.heuristic=t.heuristic||i.octile}var n=o(12),r=o(4),i=o(8),a=o(1);AStarFinder.prototype.findPath=function(t,e,o,i,a){var s,l,c,u,p,d,f,h,g=new n(function(t,e){return t.f-e.f}),y=a.getNodeAt(t,e),m=a.getNodeAt(o,i),_=this.heuristic,v=this.diagonalMovement,P=this.weight,M=Math.abs,b=Math.SQRT2;for(y.g=0,y.f=0,g.push(y),y.opened=!0;!g.empty();){if(s=g.pop(),s.closed=!0,s===m)return r.backtrace(m);for(l=a.getNeighbors(s,v),u=0,p=l.length;u<p;++u)c=l[u],c.closed||(d=c.x,f=c.y,h=s.g+(d-s.x==0||f-s.y==0?1:b),(!c.opened||h<c.g)&&(c.g=h,c.h=c.h||P*_(M(d-o),M(f-i)),c.f=c.g+c.h,c.parent=s,c.opened?g.updateItem(c):(g.push(c),c.opened=!0)))}return[]},t.exports=AStarFinder},function(t,e,o){function BiAStarFinder(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||i.manhattan,this.weight=t.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=a.OnlyWhenNoObstacles:this.diagonalMovement=a.IfAtMostOneObstacle:this.diagonalMovement=a.Never),this.diagonalMovement===a.Never?this.heuristic=t.heuristic||i.manhattan:this.heuristic=t.heuristic||i.octile}var n=o(12),r=o(4),i=o(8),a=o(1);BiAStarFinder.prototype.findPath=function(t,e,o,i,a){var s,l,c,u,p,d,f,h,g=function(t,e){return t.f-e.f},y=new n(g),m=new n(g),_=a.getNodeAt(t,e),v=a.getNodeAt(o,i),P=this.heuristic,M=this.diagonalMovement,b=this.weight,k=Math.abs,x=Math.SQRT2;for(_.g=0,_.f=0,y.push(_),_.opened=1,v.g=0,v.f=0,m.push(v),v.opened=2;!y.empty()&&!m.empty();){for(s=y.pop(),s.closed=!0,l=a.getNeighbors(s,M),u=0,p=l.length;u<p;++u)if(c=l[u],!c.closed){if(2===c.opened)return r.biBacktrace(s,c);d=c.x,f=c.y,h=s.g+(d-s.x==0||f-s.y==0?1:x),(!c.opened||h<c.g)&&(c.g=h,c.h=c.h||b*P(k(d-o),k(f-i)),c.f=c.g+c.h,c.parent=s,c.opened?y.updateItem(c):(y.push(c),c.opened=1))}for(s=m.pop(),s.closed=!0,l=a.getNeighbors(s,M),u=0,p=l.length;u<p;++u)if(c=l[u],!c.closed){if(1===c.opened)return r.biBacktrace(c,s);d=c.x,f=c.y,h=s.g+(d-s.x==0||f-s.y==0?1:x),(!c.opened||h<c.g)&&(c.g=h,c.h=c.h||b*P(k(d-t),k(f-e)),c.f=c.g+c.h,c.parent=s,c.opened?m.updateItem(c):(m.push(c),c.opened=2))}}return[]},t.exports=BiAStarFinder},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}(),r=this&&this.__assign||Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=o(6),a=o(7),s=o(0),l=function(t){function LinkModel(e,o){void 0===e&&(e="default");var n=t.call(this,e,o)||this;return n.points=[new a.PointModel(n,{x:0,y:0}),new a.PointModel(n,{x:0,y:0})],n.extras={},n.sourcePort=null,n.targetPort=null,n.labels=[],n}return n(LinkModel,t),LinkModel.prototype.deSerialize=function(e,o){var n=this;t.prototype.deSerialize.call(this,e,o),this.extras=e.extras,this.points=s.map(e.points||[],function(t){var e=new a.PointModel(n,{x:t.x,y:t.y});return e.deSerialize(t,o),e}),s.forEach(e.labels||[],function(t){var e=o.getLabelFactory(t.type).getNewInstance();e.deSerialize(t,o),n.addLabel(e)}),e.target&&this.setTargetPort(this.getParent().getNode(e.target).getPortFromID(e.targetPort)),e.source&&this.setSourcePort(this.getParent().getNode(e.source).getPortFromID(e.sourcePort))},LinkModel.prototype.serialize=function(){return s.merge(t.prototype.serialize.call(this),{source:this.sourcePort?this.sourcePort.getParent().id:null,sourcePort:this.sourcePort?this.sourcePort.id:null,target:this.targetPort?this.targetPort.getParent().id:null,targetPort:this.targetPort?this.targetPort.id:null,points:s.map(this.points,function(t){return t.serialize()}),extras:this.extras,labels:s.map(this.labels,function(t){return t.serialize()})})},LinkModel.prototype.doClone=function(t,e){void 0===t&&(t={}),e.setPoints(s.map(this.getPoints(),function(e){return e.clone(t)})),this.sourcePort&&e.setSourcePort(this.sourcePort.clone(t)),this.targetPort&&e.setTargetPort(this.targetPort.clone(t))},LinkModel.prototype.remove=function(){this.sourcePort&&this.sourcePort.removeLink(this),this.targetPort&&this.targetPort.removeLink(this),t.prototype.remove.call(this)},LinkModel.prototype.isLastPoint=function(t){return this.getPointIndex(t)===this.points.length-1},LinkModel.prototype.getPointIndex=function(t){return this.points.indexOf(t)},LinkModel.prototype.getPointModel=function(t){for(var e=0;e<this.points.length;e++)if(this.points[e].id===t)return this.points[e];return null},LinkModel.prototype.getPortForPoint=function(t){return null!==this.sourcePort&&this.getFirstPoint().getID()===t.getID()?this.sourcePort:null!==this.targetPort&&this.getLastPoint().getID()===t.getID()?this.targetPort:null},LinkModel.prototype.getPointForPort=function(t){return null!==this.sourcePort&&this.sourcePort.getID()===t.getID()?this.getFirstPoint():null!==this.targetPort&&this.targetPort.getID()===t.getID()?this.getLastPoint():null},LinkModel.prototype.getFirstPoint=function(){return this.points[0]},LinkModel.prototype.getLastPoint=function(){return this.points[this.points.length-1]},LinkModel.prototype.setSourcePort=function(t){if(null!==t)t.addLink(this);else{if(null===this.sourcePort)return;this.sourcePort.removeLink(this)}this.sourcePort=t,this.iterateListeners(function(e,o){e.sourcePortChanged&&e.sourcePortChanged(r({},o,{port:t}))})},LinkModel.prototype.getSourcePort=function(){return this.sourcePort},LinkModel.prototype.getTargetPort=function(){return this.targetPort},LinkModel.prototype.setTargetPort=function(t){if(null!==t)t.addLink(this);else{if(null===this.targetPort)return;this.targetPort.removeLink(this)}this.targetPort=t,this.iterateListeners(function(e,o){e.targetPortChanged&&e.targetPortChanged(r({},o,{port:t}))})},LinkModel.prototype.point=function(t,e){return this.addPoint(this.generatePoint(t,e))},LinkModel.prototype.addLabel=function(t){t.setParent(this),this.labels.push(t)},LinkModel.prototype.getPoints=function(){return this.points},LinkModel.prototype.setPoints=function(t){var e=this;s.forEach(t,function(t){t.setParent(e)}),this.points=t},LinkModel.prototype.removePoint=function(t){this.points.splice(this.getPointIndex(t),1)},LinkModel.prototype.removePointsBefore=function(t){this.points.splice(0,this.getPointIndex(t))},LinkModel.prototype.removePointsAfter=function(t){this.points.splice(this.getPointIndex(t)+1)},LinkModel.prototype.removeMiddlePoints=function(){this.points.length>2&&this.points.splice(0,this.points.length-2)},LinkModel.prototype.addPoint=function(t,e){return void 0===e&&(e=1),t.setParent(this),this.points.splice(e,0,t),t},LinkModel.prototype.generatePoint=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),new a.PointModel(this,{x:t,y:e})},LinkModel}(i.BaseModel);e.LinkModel=l},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(0),i=o(15),a=o(22),s=function(t){function DefaultPortModel(e,o,n,r){void 0===n&&(n=null);var i=t.call(this,o,"default",r)||this;return i.in=e,i.label=n||o,i}return n(DefaultPortModel,t),DefaultPortModel.prototype.deSerialize=function(e,o){t.prototype.deSerialize.call(this,e,o),this.in=e.in,this.label=e.label},DefaultPortModel.prototype.serialize=function(){return r.merge(t.prototype.serialize.call(this),{in:this.in,label:this.label})},DefaultPortModel.prototype.link=function(t){var e=this.createLinkModel();return e.setSourcePort(this),e.setTargetPort(t),e},DefaultPortModel.prototype.canLinkToPort=function(t){return!(t instanceof DefaultPortModel)||this.in!==t.in},DefaultPortModel.prototype.createLinkModel=function(){return t.prototype.createLinkModel.call(this)||new a.DefaultLinkModel},DefaultPortModel}(i.PortModel);e.DefaultPortModel=s},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}(),r=this&&this.__assign||Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=o(20),a=o(0),s=o(23),l=o(24),c=function(t){function DefaultLinkModel(e){void 0===e&&(e="default");var o=t.call(this,e)||this;return o.color="rgba(255,255,255,0.5)",o.width=3,o.curvyness=50,o}return n(DefaultLinkModel,t),DefaultLinkModel.prototype.serialize=function(){return a.merge(t.prototype.serialize.call(this),{width:this.width,color:this.color,curvyness:this.curvyness})},DefaultLinkModel.prototype.deSerialize=function(e,o){t.prototype.deSerialize.call(this,e,o),this.color=e.color,this.width=e.width,this.curvyness=e.curvyness},DefaultLinkModel.prototype.addLabel=function(e){if(e instanceof l.LabelModel)return t.prototype.addLabel.call(this,e);var o=new s.DefaultLabelModel;return o.setLabel(e),t.prototype.addLabel.call(this,o)},DefaultLinkModel.prototype.setWidth=function(t){this.width=t,this.iterateListeners(function(e,o){e.widthChanged&&e.widthChanged(r({},o,{width:t}))})},DefaultLinkModel.prototype.setColor=function(t){this.color=t,this.iterateListeners(function(e,o){e.colorChanged&&e.colorChanged(r({},o,{color:t}))})},DefaultLinkModel}(i.LinkModel);e.DefaultLinkModel=c},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(24),i=function(t){function DefaultLabelModel(){var e=t.call(this,"default")||this;return e.offsetY=-23,e}return n(DefaultLabelModel,t),DefaultLabelModel.prototype.setLabel=function(t){this.label=t},DefaultLabelModel}(r.LabelModel);e.DefaultLabelModel=i},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(6),i=function(t){function LabelModel(e,o){var n=t.call(this,e,o)||this;return n.offsetX=0,n.offsetY=0,n}return n(LabelModel,t),LabelModel}(r.BaseModel);e.LabelModel=i},function(t,e,o){"use strict";function __export(t){for(var o in t)e.hasOwnProperty(o)||(e[o]=t[o])}Object.defineProperty(e,"__esModule",{value:!0}),__export(o(5)),__export(o(14)),__export(o(67)),__export(o(32)),__export(o(21)),__export(o(22)),__export(o(23)),__export(o(68)),__export(o(69)),__export(o(27)),__export(o(29)),__export(o(33)),__export(o(31)),__export(o(35)),__export(o(36)),__export(o(10)),__export(o(30)),__export(o(34)),__export(o(38)),__export(o(28)),__export(o(11)),__export(o(16)),__export(o(39)),__export(o(40)),__export(o(41)),__export(o(6)),__export(o(26)),__export(o(20)),__export(o(9)),__export(o(7)),__export(o(15)),__export(o(24)),__export(o(70)),__export(o(43)),__export(o(45)),__export(o(37)),__export(o(3)),__export(o(42)),__export(o(44))},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}(),r=this&&this.__assign||Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=o(14),a=o(0),s=o(20),l=o(9),c=o(15),u=o(7),p=function(t){function DiagramModel(){var e=t.call(this)||this;return e.links={},e.nodes={},e.offsetX=0,e.offsetY=0,e.zoom=100,e.rendered=!1,e.gridSize=0,e}return n(DiagramModel,t),DiagramModel.prototype.setGridSize=function(t){void 0===t&&(t=0),this.gridSize=t,this.iterateListeners(function(e,o){e.gridUpdated&&e.gridUpdated(r({},o,{size:t}))})},DiagramModel.prototype.getGridPosition=function(t){return 0===this.gridSize?t:this.gridSize*Math.floor((t+this.gridSize/2)/this.gridSize)},DiagramModel.prototype.deSerializeDiagram=function(t,e){var o=this;this.deSerialize(t,e),this.offsetX=t.offsetX,this.offsetY=t.offsetY,this.zoom=t.zoom,this.gridSize=t.gridSize,a.forEach(t.nodes,function(t){var n=e.getNodeFactory(t.type).getNewInstance(t);n.setParent(o),n.deSerialize(t,e),o.addNode(n)}),a.forEach(t.links,function(t){var n=e.getLinkFactory(t.type).getNewInstance();n.setParent(o),n.deSerialize(t,e),o.addLink(n)})},DiagramModel.prototype.serializeDiagram=function(){return a.merge(this.serialize(),{offsetX:this.offsetX,offsetY:this.offsetY,zoom:this.zoom,gridSize:this.gridSize,links:a.map(this.links,function(t){return t.serialize()}),nodes:a.map(this.nodes,function(t){return t.serialize()})})},DiagramModel.prototype.clearSelection=function(t){void 0===t&&(t=null),a.forEach(this.getSelectedItems(),function(e){t&&t.getID()===e.getID()||e.setSelected(!1)})},DiagramModel.prototype.getSelectedItems=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Array.isArray(t)||(t=[t]);var o=[];return o=o.concat(a.flatMap(this.nodes,function(t){return t.getSelectedEntities()})),o=o.concat(a.flatMap(this.links,function(t){return t.getSelectedEntities()})),o=o.concat(a.flatMap(this.links,function(t){return a.flatMap(t.points,function(t){return t.getSelectedEntities()})})),o=a.uniq(o),t.length>0&&(o=a.filter(a.uniq(o),function(e){return!!(a.includes(t,"node")&&e instanceof l.NodeModel)||(!!(a.includes(t,"link")&&e instanceof s.LinkModel)||(!!(a.includes(t,"port")&&e instanceof c.PortModel)||!!(a.includes(t,"point")&&e instanceof u.PointModel)))})),o},DiagramModel.prototype.setZoomLevel=function(t){this.zoom=t,this.iterateListeners(function(e,o){e.zoomUpdated&&e.zoomUpdated(r({},o,{zoom:t}))})},DiagramModel.prototype.setOffset=function(t,e){this.offsetX=t,this.offsetY=e,this.iterateListeners(function(o,n){o.offsetUpdated&&o.offsetUpdated(r({},n,{offsetX:t,offsetY:e}))})},DiagramModel.prototype.setOffsetX=function(t){var e=this;this.offsetX=t,this.iterateListeners(function(o,n){o.offsetUpdated&&o.offsetUpdated(r({},n,{offsetX:t,offsetY:e.offsetY}))})},DiagramModel.prototype.setOffsetY=function(t){var e=this;this.offsetY=t,this.iterateListeners(function(t,o){t.offsetUpdated&&t.offsetUpdated(r({},o,{offsetX:e.offsetX,offsetY:e.offsetY}))})},DiagramModel.prototype.getOffsetY=function(){return this.offsetY},DiagramModel.prototype.getOffsetX=function(){return this.offsetX},DiagramModel.prototype.getZoomLevel=function(){return this.zoom},DiagramModel.prototype.getNode=function(t){return t instanceof l.NodeModel?t:this.nodes[t]?this.nodes[t]:null},DiagramModel.prototype.getLink=function(t){return t instanceof s.LinkModel?t:this.links[t]?this.links[t]:null},DiagramModel.prototype.addAll=function(){for(var t=this,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return a.forEach(e,function(e){e instanceof s.LinkModel?t.addLink(e):e instanceof l.NodeModel&&t.addNode(e)}),e},DiagramModel.prototype.addLink=function(t){var e=this;return t.addListener({entityRemoved:function(){e.removeLink(t)}}),this.links[t.getID()]=t,this.iterateListeners(function(e,o){e.linksUpdated&&e.linksUpdated(r({},o,{link:t,isCreated:!0}))}),t},DiagramModel.prototype.addNode=function(t){var e=this;return t.addListener({entityRemoved:function(){e.removeNode(t)}}),this.nodes[t.getID()]=t,this.iterateListeners(function(e,o){e.nodesUpdated&&e.nodesUpdated(r({},o,{node:t,isCreated:!0}))}),t},DiagramModel.prototype.removeLink=function(t){t=this.getLink(t),delete this.links[t.getID()],this.iterateListeners(function(e,o){e.linksUpdated&&e.linksUpdated(r({},o,{link:t,isCreated:!1}))})},DiagramModel.prototype.removeNode=function(t){t=this.getNode(t),delete this.nodes[t.getID()],this.iterateListeners(function(e,o){e.nodesUpdated&&e.nodesUpdated(r({},o,{node:t,isCreated:!1}))})},DiagramModel.prototype.getLinks=function(){return this.links},DiagramModel.prototype.getNodes=function(){return this.nodes},DiagramModel}(i.BaseEntity);e.DiagramModel=p},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(21),i=o(28),a=function(t){function DefaultPortFactory(){return t.call(this,"default")||this}return n(DefaultPortFactory,t),DefaultPortFactory.prototype.getNewInstance=function(t){return new r.DefaultPortModel(!0,"unknown")},DefaultPortFactory}(i.AbstractPortFactory);e.DefaultPortFactory=a},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(10),i=function(t){function AbstractPortFactory(){return null!==t&&t.apply(this,arguments)||this}return n(AbstractPortFactory,t),AbstractPortFactory}(r.AbstractFactory);e.AbstractPortFactory=i},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(2),i=o(30),a=o(23),s=o(31),l=function(t){function DefaultLabelFactory(){return t.call(this,"default")||this}return n(DefaultLabelFactory,t),DefaultLabelFactory.prototype.generateReactWidget=function(t,e){return r.createElement(s.DefaultLabelWidget,{model:e})},DefaultLabelFactory.prototype.getNewInstance=function(t){return new a.DefaultLabelModel},DefaultLabelFactory}(i.AbstractLabelFactory);e.DefaultLabelFactory=l},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(10),i=function(t){function AbstractLabelFactory(){return null!==t&&t.apply(this,arguments)||this}return n(AbstractLabelFactory,t),AbstractLabelFactory}(r.AbstractFactory);e.AbstractLabelFactory=i},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}(),r=this&&this.__assign||Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=o(2),a=o(3),s=function(t){function DefaultLabelWidget(e){return t.call(this,"srd-default-label",e)||this}return n(DefaultLabelWidget,t),DefaultLabelWidget.prototype.render=function(){return i.createElement("div",r({},this.getProps()),this.props.model.label)},DefaultLabelWidget}(a.BaseWidget);e.DefaultLabelWidget=s},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(21),i=o(0),a=o(9),s=o(5),l=function(t){function DefaultNodeModel(e,o){void 0===e&&(e="Untitled"),void 0===o&&(o="rgb(0,192,255)");var n=t.call(this,"default")||this;return n.name=e,n.color=o,n}return n(DefaultNodeModel,t),DefaultNodeModel.prototype.addInPort=function(t){return this.addPort(new r.DefaultPortModel(!0,s.Toolkit.UID(),t))},DefaultNodeModel.prototype.addOutPort=function(t){return this.addPort(new r.DefaultPortModel(!1,s.Toolkit.UID(),t))},DefaultNodeModel.prototype.deSerialize=function(e,o){t.prototype.deSerialize.call(this,e,o),this.name=e.name,this.color=e.color},DefaultNodeModel.prototype.serialize=function(){return i.merge(t.prototype.serialize.call(this),{name:this.name,color:this.color})},DefaultNodeModel.prototype.getInPorts=function(){return i.filter(this.ports,function(t){return t.in})},DefaultNodeModel.prototype.getOutPorts=function(){return i.filter(this.ports,function(t){return!t.in})},DefaultNodeModel}(a.NodeModel);e.DefaultNodeModel=l},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}(),r=this&&this.__assign||Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=o(2),a=o(7),s=o(5),l=o(11),c=o(0),u=o(3),p=function(t){function DefaultLinkWidget(e){var o=t.call(this,"srd-default-link",e)||this;return o.addPointToLink=function(t,e){if(!t.shiftKey&&!o.props.diagramEngine.isModelLocked(o.props.link)&&o.props.link.points.length-1<=o.props.diagramEngine.getMaxNumberPointsPerLink()){var n=new a.PointModel(o.props.link,o.props.diagramEngine.getRelativeMousePoint(t));n.setSelected(!0),o.forceUpdate(),o.props.link.addPoint(n,e),o.props.pointAdded(n,t)}},o.findPathAndRelativePositionToRenderLabel=function(t){for(var e=o.refPaths.map(function(t){return t.getTotalLength()}),n=e.reduce(function(t,e){return t+e},0)*(t/(o.props.link.labels.length+1)),r=0;r<o.refPaths.length;){if(n-e[r]<0)return{path:o.refPaths[r],position:n};n-=e[r],r++}},o.calculateLabelPosition=function(t,e){if(o.refLabels[t.id]){var n=o.findPathAndRelativePositionToRenderLabel(e),r=n.path,i=n.position,a={width:o.refLabels[t.id].offsetWidth,height:o.refLabels[t.id].offsetHeight},s=r.getPointAtLength(i),l={x:s.x-a.width/2+t.offsetX,y:s.y-a.height/2+t.offsetY};o.refLabels[t.id].setAttribute("style","transform: translate("+l.x+"px, "+l.y+"px);")}},o.refLabels={},o.refPaths=[],o.state={selected:!1},e.diagramEngine.isSmartRoutingEnabled()&&(o.pathFinding=new l.default(o.props.diagramEngine)),o}return n(DefaultLinkWidget,t),DefaultLinkWidget.prototype.calculateAllLabelPosition=function(){var t=this;c.forEach(this.props.link.labels,function(e,o){t.calculateLabelPosition(e,o+1)})},DefaultLinkWidget.prototype.componentDidUpdate=function(){this.props.link.labels.length>0&&window.requestAnimationFrame(this.calculateAllLabelPosition.bind(this))},DefaultLinkWidget.prototype.componentDidMount=function(){this.props.link.labels.length>0&&window.requestAnimationFrame(this.calculateAllLabelPosition.bind(this))},DefaultLinkWidget.prototype.generatePoint=function(t){var e=this,o=this.props.link.points[t].x,n=this.props.link.points[t].y;return i.createElement("g",{key:"point-"+this.props.link.points[t].id},i.createElement("circle",{cx:o,cy:n,r:5,className:"point "+this.bem("__point")+(this.props.link.points[t].isSelected()?this.bem("--point-selected"):"")}),i.createElement("circle",{onMouseLeave:function(){e.setState({selected:!1})},onMouseEnter:function(){e.setState({selected:!0})},"data-id":this.props.link.points[t].id,"data-linkid":this.props.link.id,cx:o,cy:n,r:15,opacity:0,className:"point "+this.bem("__point")}))},DefaultLinkWidget.prototype.generateLabel=function(t){var e=this,o=this.props.diagramEngine.canvas;return i.createElement("foreignObject",{key:t.id,className:this.bem("__label"),width:o.offsetWidth,height:o.offsetHeight},i.createElement("div",{ref:function(o){return e.refLabels[t.id]=o}},this.props.diagramEngine.getFactoryForLabel(t).generateReactWidget(this.props.diagramEngine,t)))},DefaultLinkWidget.prototype.generateLink=function(t,e,o){var n=this,a=this.props,s=i.cloneElement(a.diagramEngine.getFactoryForLink(this.props.link).generateLinkSegment(this.props.link,this,this.state.selected||this.props.link.isSelected(),t),{ref:function(t){return t&&n.refPaths.push(t)}}),l=i.cloneElement(s,r({},e,{strokeLinecap:"round",onMouseLeave:function(){n.setState({selected:!1})},onMouseEnter:function(){n.setState({selected:!0})},ref:null,"data-linkid":this.props.link.getID(),strokeOpacity:this.state.selected?.1:0,strokeWidth:20,onContextMenu:function(){n.props.diagramEngine.isModelLocked(n.props.link)||(event.preventDefault(),n.props.link.remove())}}));return i.createElement("g",{key:"link-"+o},s,l)},DefaultLinkWidget.prototype.isSmartRoutingApplicable=function(){var t=this.props,e=t.diagramEngine,o=t.link;return!!e.isSmartRoutingEnabled()&&(2===o.points.length&&(null!==o.sourcePort&&null!==o.targetPort))},DefaultLinkWidget.prototype.render=function(){var t=this,e=this.props.diagramEngine;if(!e.nodesRendered)return null;var o=this.props.link.points,n=[];if(this.isSmartRoutingApplicable()){var a=this.pathFinding.calculateDirectPath(c.first(o),c.last(o)),l=e.getRoutingMatrix(),u=this.pathFinding.calculateLinkStartEndCoords(l,a);if(u){var p=u.start,d=u.end,f=u.pathToStart,h=u.pathToEnd,g=this.pathFinding.calculateDynamicPath(l,p,d,f,h);n.push(this.generateLink(s.Toolkit.generateDynamicPath(g),{onMouseDown:function(e){t.addPointToLink(e,1)}},"0"))}}if(0===n.length)if(2===o.length){var y=Math.abs(o[0].x-o[1].x)>Math.abs(o[0].y-o[1].y),m=y?"x":"y";Math.abs(o[0][m]-o[1][m])<50&&5;var _=o[0],v=o[1];_[m]>v[m]&&(_=o[1],v=o[0]),n.push(this.generateLink(s.Toolkit.generateCurvePath(_,v,this.props.link.curvyness),{onMouseDown:function(e){t.addPointToLink(e,1)}},"0")),null===this.props.link.targetPort&&n.push(this.generatePoint(1))}else{for(var P=this,M=0;M<o.length-1;M++)!function(e){n.push(P.generateLink(s.Toolkit.generateLinePath(o[e],o[e+1]),{"data-linkid":P.props.link.id,"data-point":e,onMouseDown:function(o){t.addPointToLink(o,e+1)}},e))}(M);for(var b=1;b<o.length-1;b++)n.push(this.generatePoint(b));null===this.props.link.targetPort&&n.push(this.generatePoint(o.length-1))}return this.refPaths=[],i.createElement("g",r({},this.getProps()),n,c.map(this.props.link.labels,function(e){return t.generateLabel(e)}))},DefaultLinkWidget.defaultProps={color:"black",width:3,link:null,engine:null,smooth:!1,diagramEngine:null},DefaultLinkWidget}(u.BaseWidget);e.DefaultLinkWidget=p},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(10),i=function(t){function AbstractLinkFactory(){return null!==t&&t.apply(this,arguments)||this}return n(AbstractLinkFactory,t),AbstractLinkFactory}(r.AbstractFactory);e.AbstractLinkFactory=i},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}(),r=this&&this.__assign||Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=o(2),a=o(0),s=o(36),l=o(3),c=function(t){function DefaultNodeWidget(e){var o=t.call(this,"srd-default-node",e)||this;return o.state={},o}return n(DefaultNodeWidget,t),DefaultNodeWidget.prototype.generatePort=function(t){return i.createElement(s.DefaultPortLabel,{model:t,key:t.id})},DefaultNodeWidget.prototype.render=function(){return i.createElement("div",r({},this.getProps(),{style:{background:this.props.node.color}}),i.createElement("div",{className:this.bem("__title")},i.createElement("div",{className:this.bem("__name")},this.props.node.name)),i.createElement("div",{className:this.bem("__ports")},i.createElement("div",{className:this.bem("__in")},a.map(this.props.node.getInPorts(),this.generatePort.bind(this))),i.createElement("div",{className:this.bem("__out")},a.map(this.props.node.getOutPorts(),this.generatePort.bind(this)))))},DefaultNodeWidget}(l.BaseWidget);e.DefaultNodeWidget=c},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}(),r=this&&this.__assign||Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=o(2),a=o(37),s=o(3),l=function(t){function DefaultPortLabel(e){return t.call(this,"srd-default-port",e)||this}return n(DefaultPortLabel,t),DefaultPortLabel.prototype.getClassName=function(){return t.prototype.getClassName.call(this)+(this.props.model.in?this.bem("--in"):this.bem("--out"))},DefaultPortLabel.prototype.render=function(){var t=i.createElement(a.PortWidget,{node:this.props.model.getParent(),name:this.props.model.name}),e=i.createElement("div",{className:"name"},this.props.model.label);return i.createElement("div",r({},this.getProps()),this.props.model.in?t:e,this.props.model.in?e:t)},DefaultPortLabel}(s.BaseWidget);e.DefaultPortLabel=l},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}(),r=this&&this.__assign||Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=o(2),a=o(3),s=function(t){function PortWidget(e){var o=t.call(this,"srd-port",e)||this;return o.state={selected:!1},o}return n(PortWidget,t),PortWidget.prototype.getClassName=function(){return"port "+t.prototype.getClassName.call(this)+(this.state.selected?this.bem("--selected"):"")},PortWidget.prototype.render=function(){var t=this;return i.createElement("div",r({},this.getProps(),{onMouseEnter:function(){t.setState({selected:!0})},onMouseLeave:function(){t.setState({selected:!1})},"data-name":this.props.name,"data-nodeid":this.props.node.getID()}))},PortWidget}(a.BaseWidget);e.PortWidget=s},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(10),i=function(t){function AbstractNodeFactory(){return null!==t&&t.apply(this,arguments)||this}return n(AbstractNodeFactory,t),AbstractNodeFactory}(r.AbstractFactory);e.AbstractNodeFactory=i},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(16),i=function(t){function MoveCanvasAction(e,o,n){var r=t.call(this,e,o)||this;return r.initialOffsetX=n.getOffsetX(),r.initialOffsetY=n.getOffsetY(),r}return n(MoveCanvasAction,t),MoveCanvasAction}(r.BaseAction);e.MoveCanvasAction=i},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(16),i=function(t){function MoveItemsAction(e,o,n){var r=t.call(this,e,o)||this;r.moved=!1,n.enableRepaintEntities(n.getDiagramModel().getSelectedItems());var i=n.getDiagramModel().getSelectedItems();return i=i.filter(function(t){return!n.isModelLocked(t)}),r.selectionModels=i.map(function(t){return{model:t,initialX:t.x,initialY:t.y}}),r}return n(MoveItemsAction,t),MoveItemsAction}(r.BaseAction);e.MoveItemsAction=i},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(16),i=function(t){function SelectingAction(e,o){var n=t.call(this,e,o)||this;return n.mouseX2=e,n.mouseY2=o,n}return n(SelectingAction,t),SelectingAction.prototype.getBoxDimensions=function(){return{left:this.mouseX2>this.mouseX?this.mouseX:this.mouseX2,top:this.mouseY2>this.mouseY?this.mouseY:this.mouseY2,width:Math.abs(this.mouseX2-this.mouseX),height:Math.abs(this.mouseY2-this.mouseY),right:this.mouseX2<this.mouseX?this.mouseX:this.mouseX2,bottom:this.mouseY2<this.mouseY?this.mouseY:this.mouseY2}},SelectingAction.prototype.containsElement=function(t,e,o){var n=o.getZoomLevel()/100,r=this.getBoxDimensions();return t*n+o.getOffsetX()>r.left&&t*n+o.getOffsetX()<r.right&&e*n+o.getOffsetY()>r.top&&e*n+o.getOffsetY()<r.bottom},SelectingAction}(r.BaseAction);e.SelectingAction=i},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}(),r=this&&this.__assign||Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=o(2),a=o(43),s=o(0),l=o(3),c=function(t){function LinkLayerWidget(e){var o=t.call(this,"srd-link-layer",e)||this;return o.state={},o}return n(LinkLayerWidget,t),LinkLayerWidget.prototype.render=function(){var t=this,e=this.props.diagramEngine.getDiagramModel();return i.createElement("svg",r({},this.getProps(),{style:{transform:"translate("+e.getOffsetX()+"px,"+e.getOffsetY()+"px) scale("+e.getZoomLevel()/100+")"}}),this.props.diagramEngine.canvas&&s.map(e.getLinks(),function(e){if(t.props.diagramEngine.nodesRendered&&!t.props.diagramEngine.linksThatHaveInitiallyRendered[e.id]){if(null!==e.sourcePort)try{var o=t.props.diagramEngine.getPortCenter(e.sourcePort);e.points[0].updateLocation(o);var n=t.props.diagramEngine.getPortCoords(e.sourcePort);e.sourcePort.updateCoords(n),t.props.diagramEngine.linksThatHaveInitiallyRendered[e.id]=!0}catch(t){}if(null!==e.targetPort)try{var o=t.props.diagramEngine.getPortCenter(e.targetPort);s.last(e.points).updateLocation(o);var n=t.props.diagramEngine.getPortCoords(e.targetPort);e.targetPort.updateCoords(n),t.props.diagramEngine.linksThatHaveInitiallyRendered[e.id]=!0}catch(t){}}var r=t.props.diagramEngine.generateWidgetForLink(e);if(!r)throw new Error("no link generated for type: "+e.getType());return i.createElement(a.LinkWidget,{key:e.getID(),link:e,diagramEngine:t.props.diagramEngine},i.cloneElement(r,{pointAdded:t.props.pointAdded}))}))},LinkLayerWidget}(l.BaseWidget);e.LinkLayerWidget=c},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(3),i=function(t){function LinkWidget(e){var o=t.call(this,"srd-link",e)||this;return o.state={},o}return n(LinkWidget,t),LinkWidget.prototype.shouldComponentUpdate=function(){return this.props.diagramEngine.canEntityRepaint(this.props.link)},LinkWidget.prototype.render=function(){return this.props.children},LinkWidget}(r.BaseWidget);e.LinkWidget=i},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}(),r=this&&this.__assign||Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=o(2),a=o(0),s=o(45),l=o(3),c=function(t){function NodeLayerWidget(e){var o=t.call(this,"srd-node-layer",e)||this;return o.updateNodeDimensions=function(){if(!o.props.diagramEngine.nodesRendered){var t=o.props.diagramEngine.getDiagramModel();a.map(t.getNodes(),function(t){t.updateDimensions(o.props.diagramEngine.getNodeDimensions(t))})}},o.state={},o}return n(NodeLayerWidget,t),NodeLayerWidget.prototype.componentDidUpdate=function(){this.updateNodeDimensions(),this.props.diagramEngine.nodesRendered=!0},NodeLayerWidget.prototype.render=function(){var t=this,e=this.props.diagramEngine.getDiagramModel();return i.createElement("div",r({},this.getProps(),{style:{transform:"translate("+e.getOffsetX()+"px,"+e.getOffsetY()+"px) scale("+e.getZoomLevel()/100+")"}}),a.map(e.getNodes(),function(e){return i.createElement(s.NodeWidget,{diagramEngine:t.props.diagramEngine,key:e.id,node:e},t.props.diagramEngine.generateWidgetForNode(e))}))},NodeLayerWidget}(l.BaseWidget);e.NodeLayerWidget=c},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}(),r=this&&this.__assign||Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=o(2),a=o(3),s=function(t){function NodeWidget(e){var o=t.call(this,"srd-node",e)||this;return o.state={},o}return n(NodeWidget,t),NodeWidget.prototype.shouldComponentUpdate=function(){return this.props.diagramEngine.canEntityRepaint(this.props.node)},NodeWidget.prototype.getClassName=function(){return"node "+t.prototype.getClassName.call(this)+(this.props.node.isSelected()?this.bem("--selected"):"")},NodeWidget.prototype.render=function(){return i.createElement("div",r({},this.getProps(),{"data-nodeid":this.props.node.id,style:{top:this.props.node.y,left:this.props.node.x}}),this.props.children)},NodeWidget}(a.BaseWidget);e.NodeWidget=s},function(t,e,o){var n=o(47);t.exports=function(t,e,o){for(var r=o?t:t.parentNode;r&&r!==document;){if(n(r,e))return r;r=r.parentNode}}},function(t,e){function match(t,e){if(n)return n.call(t,e);for(var o=t.parentNode.querySelectorAll(e),r=0;r<o.length;++r)if(o[r]==t)return!0;return!1}var o=Element.prototype,n=o.matchesSelector||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector;t.exports=match},function(t,e,o){t.exports=o(49)},function(t,e,o){t.exports={Heap:o(12),Node:o(17),Grid:o(52),Util:o(4),DiagonalMovement:o(1),Heuristic:o(8),AStarFinder:o(18),BestFirstFinder:o(53),BreadthFirstFinder:o(54),DijkstraFinder:o(55),BiAStarFinder:o(19),BiBestFirstFinder:o(56),BiBreadthFirstFinder:o(57),BiDijkstraFinder:o(58),IDAStarFinder:o(59),JumpPointFinder:o(60)}},function(t,e,o){(function(t){(function(){var e,o,n,r,i,a,s,l,c,u,p,d,f,h,g;n=Math.floor,u=Math.min,o=function(t,e){return t<e?-1:t>e?1:0},c=function(t,e,r,i,a){var s;if(null==r&&(r=0),null==a&&(a=o),r<0)throw new Error("lo must be non-negative");for(null==i&&(i=t.length);r<i;)s=n((r+i)/2),a(e,t[s])<0?i=s:r=s+1;return[].splice.apply(t,[r,r-r].concat(e)),e},a=function(t,e,n){return null==n&&(n=o),t.push(e),h(t,0,t.length-1,n)},i=function(t,e){var n,r;return null==e&&(e=o),n=t.pop(),t.length?(r=t[0],t[0]=n,g(t,0,e)):r=n,r},l=function(t,e,n){var r;return null==n&&(n=o),r=t[0],t[0]=e,g(t,0,n),r},s=function(t,e,n){var r;return null==n&&(n=o),t.length&&n(t[0],e)<0&&(r=[t[0],e],e=r[0],t[0]=r[1],g(t,0,n)),e},r=function(t,e){var r,i,a,s,l,c;for(null==e&&(e=o),s=function(){c=[];for(var e=0,o=n(t.length/2);0<=o?e<o:e>o;0<=o?e++:e--)c.push(e);return c}.apply(this).reverse(),l=[],i=0,a=s.length;i<a;i++)r=s[i],l.push(g(t,r,e));return l},f=function(t,e,n){var r;if(null==n&&(n=o),-1!==(r=t.indexOf(e)))return h(t,0,r,n),g(t,r,n)},p=function(t,e,n){var i,a,l,c,u;if(null==n&&(n=o),a=t.slice(0,e),!a.length)return a;for(r(a,n),u=t.slice(e),l=0,c=u.length;l<c;l++)i=u[l],s(a,i,n);return a.sort(n).reverse()},d=function(t,e,n){var a,s,l,p,d,f,h,g,y;if(null==n&&(n=o),10*e<=t.length){if(l=t.slice(0,e).sort(n),!l.length)return l;for(s=l[l.length-1],h=t.slice(e),p=0,f=h.length;p<f;p++)a=h[p],n(a,s)<0&&(c(l,a,0,null,n),l.pop(),s=l[l.length-1]);return l}for(r(t,n),y=[],d=0,g=u(e,t.length);0<=g?d<g:d>g;0<=g?++d:--d)y.push(i(t,n));return y},h=function(t,e,n,r){var i,a,s;for(null==r&&(r=o),i=t[n];n>e&&(s=n-1>>1,a=t[s],r(i,a)<0);)t[n]=a,n=s;return t[n]=i},g=function(t,e,n){var r,i,a,s,l;for(null==n&&(n=o),i=t.length,l=e,a=t[e],r=2*e+1;r<i;)s=r+1,s<i&&!(n(t[r],t[s])<0)&&(r=s),t[e]=t[r],e=r,r=2*e+1;return t[e]=a,h(t,l,e,n)},e=function(){function Heap(t){this.cmp=null!=t?t:o,this.nodes=[]}return Heap.push=a,Heap.pop=i,Heap.replace=l,Heap.pushpop=s,Heap.heapify=r,Heap.updateItem=f,Heap.nlargest=p,Heap.nsmallest=d,Heap.prototype.push=function(t){return a(this.nodes,t,this.cmp)},Heap.prototype.pop=function(){return i(this.nodes,this.cmp)},Heap.prototype.peek=function(){return this.nodes[0]},Heap.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},Heap.prototype.replace=function(t){return l(this.nodes,t,this.cmp)},Heap.prototype.pushpop=function(t){return s(this.nodes,t,this.cmp)},Heap.prototype.heapify=function(){return r(this.nodes,this.cmp)},Heap.prototype.updateItem=function(t){return f(this.nodes,t,this.cmp)},Heap.prototype.clear=function(){return this.nodes=[]},Heap.prototype.empty=function(){return 0===this.nodes.length},Heap.prototype.size=function(){return this.nodes.length},Heap.prototype.clone=function(){var t;return t=new Heap,t.nodes=this.nodes.slice(0),t},Heap.prototype.toArray=function(){return this.nodes.slice(0)},Heap.prototype.insert=Heap.prototype.push,Heap.prototype.top=Heap.prototype.peek,Heap.prototype.front=Heap.prototype.peek,Heap.prototype.has=Heap.prototype.contains,Heap.prototype.copy=Heap.prototype.clone,Heap}(),(void 0!==t&&null!==t?t.exports:void 0)?t.exports=e:window.Heap=e}).call(this)}).call(e,o(51)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,o){function Grid(t,e,o){var n;"object"!=typeof t?n=t:(e=t.length,n=t[0].length,o=t),this.width=n,this.height=e,this.nodes=this._buildNodes(n,e,o)}var n=o(17),r=o(1);Grid.prototype._buildNodes=function(t,e,o){var r,i,a=new Array(e);for(r=0;r<e;++r)for(a[r]=new Array(t),i=0;i<t;++i)a[r][i]=new n(i,r);if(void 0===o)return a;if(o.length!==e||o[0].length!==t)throw new Error("Matrix size does not fit");for(r=0;r<e;++r)for(i=0;i<t;++i)o[r][i]&&(a[r][i].walkable=!1);return a},Grid.prototype.getNodeAt=function(t,e){return this.nodes[e][t]},Grid.prototype.isWalkableAt=function(t,e){return this.isInside(t,e)&&this.nodes[e][t].walkable},Grid.prototype.isInside=function(t,e){return t>=0&&t<this.width&&e>=0&&e<this.height},Grid.prototype.setWalkableAt=function(t,e,o){this.nodes[e][t].walkable=o},Grid.prototype.getNeighbors=function(t,e){var o=t.x,n=t.y,i=[],a=!1,s=!1,l=!1,c=!1,u=!1,p=!1,d=!1,f=!1,h=this.nodes;if(this.isWalkableAt(o,n-1)&&(i.push(h[n-1][o]),a=!0),this.isWalkableAt(o+1,n)&&(i.push(h[n][o+1]),l=!0),this.isWalkableAt(o,n+1)&&(i.push(h[n+1][o]),u=!0),this.isWalkableAt(o-1,n)&&(i.push(h[n][o-1]),d=!0),e===r.Never)return i;if(e===r.OnlyWhenNoObstacles)s=d&&a,c=a&&l,p=l&&u,f=u&&d;else if(e===r.IfAtMostOneObstacle)s=d||a,c=a||l,p=l||u,f=u||d;else{if(e!==r.Always)throw new Error("Incorrect value of diagonalMovement");s=!0,c=!0,p=!0,f=!0}return s&&this.isWalkableAt(o-1,n-1)&&i.push(h[n-1][o-1]),c&&this.isWalkableAt(o+1,n-1)&&i.push(h[n-1][o+1]),p&&this.isWalkableAt(o+1,n+1)&&i.push(h[n+1][o+1]),f&&this.isWalkableAt(o-1,n+1)&&i.push(h[n+1][o-1]),i},Grid.prototype.clone=function(){var t,e,o=this.width,r=this.height,i=this.nodes,a=new Grid(o,r),s=new Array(r);for(t=0;t<r;++t)for(s[t]=new Array(o),e=0;e<o;++e)s[t][e]=new n(e,t,i[t][e].walkable);return a.nodes=s,a},t.exports=Grid},function(t,e,o){function BestFirstFinder(t){n.call(this,t);var e=this.heuristic;this.heuristic=function(t,o){return 1e6*e(t,o)}}var n=o(18);BestFirstFinder.prototype=new n,BestFirstFinder.prototype.constructor=BestFirstFinder,t.exports=BestFirstFinder},function(t,e,o){function BreadthFirstFinder(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=r.OnlyWhenNoObstacles:this.diagonalMovement=r.IfAtMostOneObstacle:this.diagonalMovement=r.Never)}var n=o(4),r=o(1);BreadthFirstFinder.prototype.findPath=function(t,e,o,r,i){var a,s,l,c,u,p=[],d=this.diagonalMovement,f=i.getNodeAt(t,e),h=i.getNodeAt(o,r);for(p.push(f),f.opened=!0;p.length;){if(l=p.shift(),l.closed=!0,l===h)return n.backtrace(h);for(a=i.getNeighbors(l,d),c=0,u=a.length;c<u;++c)s=a[c],s.closed||s.opened||(p.push(s),s.opened=!0,s.parent=l)}return[]},t.exports=BreadthFirstFinder},function(t,e,o){function DijkstraFinder(t){n.call(this,t),this.heuristic=function(t,e){return 0}}var n=o(18);DijkstraFinder.prototype=new n,DijkstraFinder.prototype.constructor=DijkstraFinder,t.exports=DijkstraFinder},function(t,e,o){function BiBestFirstFinder(t){n.call(this,t);var e=this.heuristic;this.heuristic=function(t,o){return 1e6*e(t,o)}}var n=o(19);BiBestFirstFinder.prototype=new n,BiBestFirstFinder.prototype.constructor=BiBestFirstFinder,t.exports=BiBestFirstFinder},function(t,e,o){function BiBreadthFirstFinder(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=r.OnlyWhenNoObstacles:this.diagonalMovement=r.IfAtMostOneObstacle:this.diagonalMovement=r.Never)}var n=o(4),r=o(1);BiBreadthFirstFinder.prototype.findPath=function(t,e,o,r,i){var a,s,l,c,u,p=i.getNodeAt(t,e),d=i.getNodeAt(o,r),f=[],h=[],g=this.diagonalMovement;for(f.push(p),p.opened=!0,p.by=0,h.push(d),d.opened=!0,d.by=1;f.length&&h.length;){for(l=f.shift(),l.closed=!0,a=i.getNeighbors(l,g),c=0,u=a.length;c<u;++c)if(s=a[c],!s.closed)if(s.opened){if(1===s.by)return n.biBacktrace(l,s)}else f.push(s),s.parent=l,s.opened=!0,s.by=0;for(l=h.shift(),l.closed=!0,a=i.getNeighbors(l,g),c=0,u=a.length;c<u;++c)if(s=a[c],!s.closed)if(s.opened){if(0===s.by)return n.biBacktrace(s,l)}else h.push(s),s.parent=l,s.opened=!0,s.by=1}return[]},t.exports=BiBreadthFirstFinder},function(t,e,o){function BiDijkstraFinder(t){n.call(this,t),this.heuristic=function(t,e){return 0}}var n=o(19);BiDijkstraFinder.prototype=new n,BiDijkstraFinder.prototype.constructor=BiDijkstraFinder,t.exports=BiDijkstraFinder},function(t,e,o){function IDAStarFinder(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||n.manhattan,this.weight=t.weight||1,this.trackRecursion=t.trackRecursion||!1,this.timeLimit=t.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=i.OnlyWhenNoObstacles:this.diagonalMovement=i.IfAtMostOneObstacle:this.diagonalMovement=i.Never),this.diagonalMovement===i.Never?this.heuristic=t.heuristic||n.manhattan:this.heuristic=t.heuristic||n.octile}var n=(o(4),o(8)),r=o(17),i=o(1);IDAStarFinder.prototype.findPath=function(t,e,o,n,i){var a,s,l,c=0,u=(new Date).getTime(),p=function(t,e){return this.heuristic(Math.abs(e.x-t.x),Math.abs(e.y-t.y))}.bind(this),d=function(t,e){return t.x===e.x||t.y===e.y?1:Math.SQRT2},f=function(t,e,o,n,a){if(c++,this.timeLimit>0&&(new Date).getTime()-u>1e3*this.timeLimit)return 1/0;var s=e+p(t,g)*this.weight;if(s>o)return s;if(t==g)return n[a]=[t.x,t.y],t;var l,h,y,m,_=i.getNeighbors(t,this.diagonalMovement);for(y=0,l=1/0;m=_[y];++y){if(this.trackRecursion&&(m.retainCount=m.retainCount+1||1,!0!==m.tested&&(m.tested=!0)),(h=f(m,e+d(t,m),o,n,a+1))instanceof r)return n[a]=[t.x,t.y],h;this.trackRecursion&&0==--m.retainCount&&(m.tested=!1),h<l&&(l=h)}return l}.bind(this),h=i.getNodeAt(t,e),g=i.getNodeAt(o,n),y=p(h,g);for(a=0;!0;++a){if(s=[],(l=f(h,0,y,s,0))===1/0)return[];if(l instanceof r)return s;y=l}return[]},t.exports=IDAStarFinder},function(t,e,o){function JumpPointFinder(t){return t=t||{},t.diagonalMovement===n.Never?new r(t):t.diagonalMovement===n.Always?new i(t):t.diagonalMovement===n.OnlyWhenNoObstacles?new a(t):new s(t)}var n=o(1),r=o(61),i=o(62),a=o(63),s=o(64);t.exports=JumpPointFinder},function(t,e,o){function JPFNeverMoveDiagonally(t){n.call(this,t)}var n=o(13),r=o(1);JPFNeverMoveDiagonally.prototype=new n,JPFNeverMoveDiagonally.prototype.constructor=JPFNeverMoveDiagonally,JPFNeverMoveDiagonally.prototype._jump=function(t,e,o,n){var r=this.grid,i=t-o,a=e-n;if(!r.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(r.getNodeAt(t,e).tested=!0),r.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==i){if(r.isWalkableAt(t,e-1)&&!r.isWalkableAt(t-i,e-1)||r.isWalkableAt(t,e+1)&&!r.isWalkableAt(t-i,e+1))return[t,e]}else{if(0===a)throw new Error("Only horizontal and vertical movements are allowed");if(r.isWalkableAt(t-1,e)&&!r.isWalkableAt(t-1,e-a)||r.isWalkableAt(t+1,e)&&!r.isWalkableAt(t+1,e-a))return[t,e];if(this._jump(t+1,e,t,e)||this._jump(t-1,e,t,e))return[t,e]}return this._jump(t+i,e+a,t,e)},JPFNeverMoveDiagonally.prototype._findNeighbors=function(t){var e,o,n,i,a,s,l,c,u=t.parent,p=t.x,d=t.y,f=this.grid,h=[];if(u)e=u.x,o=u.y,n=(p-e)/Math.max(Math.abs(p-e),1),i=(d-o)/Math.max(Math.abs(d-o),1),0!==n?(f.isWalkableAt(p,d-1)&&h.push([p,d-1]),f.isWalkableAt(p,d+1)&&h.push([p,d+1]),f.isWalkableAt(p+n,d)&&h.push([p+n,d])):0!==i&&(f.isWalkableAt(p-1,d)&&h.push([p-1,d]),f.isWalkableAt(p+1,d)&&h.push([p+1,d]),f.isWalkableAt(p,d+i)&&h.push([p,d+i]));else for(a=f.getNeighbors(t,r.Never),l=0,c=a.length;l<c;++l)s=a[l],h.push([s.x,s.y]);return h},t.exports=JPFNeverMoveDiagonally},function(t,e,o){function JPFAlwaysMoveDiagonally(t){n.call(this,t)}var n=o(13),r=o(1);JPFAlwaysMoveDiagonally.prototype=new n,JPFAlwaysMoveDiagonally.prototype.constructor=JPFAlwaysMoveDiagonally,JPFAlwaysMoveDiagonally.prototype._jump=function(t,e,o,n){var r=this.grid,i=t-o,a=e-n;if(!r.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(r.getNodeAt(t,e).tested=!0),r.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==i&&0!==a){if(r.isWalkableAt(t-i,e+a)&&!r.isWalkableAt(t-i,e)||r.isWalkableAt(t+i,e-a)&&!r.isWalkableAt(t,e-a))return[t,e];if(this._jump(t+i,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==i){if(r.isWalkableAt(t+i,e+1)&&!r.isWalkableAt(t,e+1)||r.isWalkableAt(t+i,e-1)&&!r.isWalkableAt(t,e-1))return[t,e]}else if(r.isWalkableAt(t+1,e+a)&&!r.isWalkableAt(t+1,e)||r.isWalkableAt(t-1,e+a)&&!r.isWalkableAt(t-1,e))return[t,e];return this._jump(t+i,e+a,t,e)},JPFAlwaysMoveDiagonally.prototype._findNeighbors=function(t){var e,o,n,i,a,s,l,c,u=t.parent,p=t.x,d=t.y,f=this.grid,h=[];if(u)e=u.x,o=u.y,n=(p-e)/Math.max(Math.abs(p-e),1),i=(d-o)/Math.max(Math.abs(d-o),1),0!==n&&0!==i?(f.isWalkableAt(p,d+i)&&h.push([p,d+i]),f.isWalkableAt(p+n,d)&&h.push([p+n,d]),f.isWalkableAt(p+n,d+i)&&h.push([p+n,d+i]),f.isWalkableAt(p-n,d)||h.push([p-n,d+i]),f.isWalkableAt(p,d-i)||h.push([p+n,d-i])):0===n?(f.isWalkableAt(p,d+i)&&h.push([p,d+i]),f.isWalkableAt(p+1,d)||h.push([p+1,d+i]),f.isWalkableAt(p-1,d)||h.push([p-1,d+i])):(f.isWalkableAt(p+n,d)&&h.push([p+n,d]),f.isWalkableAt(p,d+1)||h.push([p+n,d+1]),f.isWalkableAt(p,d-1)||h.push([p+n,d-1]));else for(a=f.getNeighbors(t,r.Always),l=0,c=a.length;l<c;++l)s=a[l],h.push([s.x,s.y]);return h},t.exports=JPFAlwaysMoveDiagonally},function(t,e,o){function JPFMoveDiagonallyIfNoObstacles(t){n.call(this,t)}var n=o(13),r=o(1);JPFMoveDiagonallyIfNoObstacles.prototype=new n,JPFMoveDiagonallyIfNoObstacles.prototype.constructor=JPFMoveDiagonallyIfNoObstacles,JPFMoveDiagonallyIfNoObstacles.prototype._jump=function(t,e,o,n){var r=this.grid,i=t-o,a=e-n;if(!r.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(r.getNodeAt(t,e).tested=!0),r.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==i&&0!==a){if(this._jump(t+i,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==i){if(r.isWalkableAt(t,e-1)&&!r.isWalkableAt(t-i,e-1)||r.isWalkableAt(t,e+1)&&!r.isWalkableAt(t-i,e+1))return[t,e]}else if(0!==a&&(r.isWalkableAt(t-1,e)&&!r.isWalkableAt(t-1,e-a)||r.isWalkableAt(t+1,e)&&!r.isWalkableAt(t+1,e-a)))return[t,e];return r.isWalkableAt(t+i,e)&&r.isWalkableAt(t,e+a)?this._jump(t+i,e+a,t,e):null},JPFMoveDiagonallyIfNoObstacles.prototype._findNeighbors=function(t){var e,o,n,i,a,s,l,c,u=t.parent,p=t.x,d=t.y,f=this.grid,h=[];if(u)if(e=u.x,o=u.y,n=(p-e)/Math.max(Math.abs(p-e),1),i=(d-o)/Math.max(Math.abs(d-o),1),0!==n&&0!==i)f.isWalkableAt(p,d+i)&&h.push([p,d+i]),f.isWalkableAt(p+n,d)&&h.push([p+n,d]),f.isWalkableAt(p,d+i)&&f.isWalkableAt(p+n,d)&&h.push([p+n,d+i]);else{var g;if(0!==n){g=f.isWalkableAt(p+n,d);var y=f.isWalkableAt(p,d+1),m=f.isWalkableAt(p,d-1);g&&(h.push([p+n,d]),y&&h.push([p+n,d+1]),m&&h.push([p+n,d-1])),y&&h.push([p,d+1]),m&&h.push([p,d-1])}else if(0!==i){g=f.isWalkableAt(p,d+i);var _=f.isWalkableAt(p+1,d),v=f.isWalkableAt(p-1,d);g&&(h.push([p,d+i]),_&&h.push([p+1,d+i]),v&&h.push([p-1,d+i])),_&&h.push([p+1,d]),v&&h.push([p-1,d])}}else for(a=f.getNeighbors(t,r.OnlyWhenNoObstacles),l=0,c=a.length;l<c;++l)s=a[l],h.push([s.x,s.y]);return h},t.exports=JPFMoveDiagonallyIfNoObstacles},function(t,e,o){function JPFMoveDiagonallyIfAtMostOneObstacle(t){n.call(this,t)}var n=o(13),r=o(1);JPFMoveDiagonallyIfAtMostOneObstacle.prototype=new n,JPFMoveDiagonallyIfAtMostOneObstacle.prototype.constructor=JPFMoveDiagonallyIfAtMostOneObstacle,JPFMoveDiagonallyIfAtMostOneObstacle.prototype._jump=function(t,e,o,n){var r=this.grid,i=t-o,a=e-n;if(!r.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(r.getNodeAt(t,e).tested=!0),r.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==i&&0!==a){if(r.isWalkableAt(t-i,e+a)&&!r.isWalkableAt(t-i,e)||r.isWalkableAt(t+i,e-a)&&!r.isWalkableAt(t,e-a))return[t,e];if(this._jump(t+i,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==i){if(r.isWalkableAt(t+i,e+1)&&!r.isWalkableAt(t,e+1)||r.isWalkableAt(t+i,e-1)&&!r.isWalkableAt(t,e-1))return[t,e]}else if(r.isWalkableAt(t+1,e+a)&&!r.isWalkableAt(t+1,e)||r.isWalkableAt(t-1,e+a)&&!r.isWalkableAt(t-1,e))return[t,e];return r.isWalkableAt(t+i,e)||r.isWalkableAt(t,e+a)?this._jump(t+i,e+a,t,e):null},JPFMoveDiagonallyIfAtMostOneObstacle.prototype._findNeighbors=function(t){var e,o,n,i,a,s,l,c,u=t.parent,p=t.x,d=t.y,f=this.grid,h=[];if(u)e=u.x,o=u.y,n=(p-e)/Math.max(Math.abs(p-e),1),i=(d-o)/Math.max(Math.abs(d-o),1),0!==n&&0!==i?(f.isWalkableAt(p,d+i)&&h.push([p,d+i]),f.isWalkableAt(p+n,d)&&h.push([p+n,d]),(f.isWalkableAt(p,d+i)||f.isWalkableAt(p+n,d))&&h.push([p+n,d+i]),!f.isWalkableAt(p-n,d)&&f.isWalkableAt(p,d+i)&&h.push([p-n,d+i]),!f.isWalkableAt(p,d-i)&&f.isWalkableAt(p+n,d)&&h.push([p+n,d-i])):0===n?f.isWalkableAt(p,d+i)&&(h.push([p,d+i]),f.isWalkableAt(p+1,d)||h.push([p+1,d+i]),f.isWalkableAt(p-1,d)||h.push([p-1,d+i])):f.isWalkableAt(p+n,d)&&(h.push([p+n,d]),f.isWalkableAt(p,d+1)||h.push([p+n,d+1]),f.isWalkableAt(p,d-1)||h.push([p+n,d-1]));else for(a=f.getNeighbors(t,r.IfAtMostOneObstacle),l=0,c=a.length;l<c;++l)s=a[l],h.push([s.x,s.y]);return h},t.exports=JPFMoveDiagonallyIfAtMostOneObstacle},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function sliceIterator(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(o.push(a.value),!e||o.length!==e);n=!0);}catch(t){r=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return o}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return sliceIterator(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=o(66),i=function Path(t){var e=t||[],o=function push(t,e){var o=t.slice(0,t.length);return o.push(e),o},i=function areEqualPoints(t,e){var o=n(t,2),r=o[0],i=o[1],a=n(e,2),s=a[0],l=a[1];return r===s&&i===l},a=function trimZeros(t,e){for(var o=t.length;"0"===t.charAt(o-1);)o-=1;return"."===t.charAt(o-1)&&(o-=1),t.substr(0,o)},s=function round(t,e){var o=t.toFixed(e);return a(o)},l=function printInstrunction(t){return t.command+" "+t.params.map(function(t){return s(t,6)}).join(" ")},c=function point(t,e){var o=t.command,n=t.params;switch(o){case"M":case"L":return[n[0],n[1]];case"H":return[n[0],e[1]];case"V":return[e[0],n[0]];case"Z":return null;case"C":return[n[4],n[5]];case"S":case"Q":return[n[2],n[3]];case"T":return[n[0],n[1]];case"A":return[n[5],n[6]]}},u=function transformParams(t,e,o){var n=t.params,i={V:function V(t,e,o){var i=[{x:o[0],y:n[1]}],a=(0,r.matrixTransform)(i,e);return a[0].x===(0,r.matrixTransform)([{x:o[0],y:o[1]}])[0].x?{command:"V",params:[a[0].y]}:{command:"L",params:[a[0].x,a[0].y]}},H:function H(t,e,o){var i=[{x:n[0],y:o[1]}],a=(0,r.matrixTransform)(i,e);return a[0].y===(0,r.matrixTransform)([{x:o[0],y:o[1]}])[0].y?{command:"H",params:[a[0].x]}:{command:"L",params:[a[0].x,a[0].y]}},A:function A(t,e,o){var i=(0,r.transformEllipse)(n[0],n[1],n[2],e),a=n[4];e[0]*e[3]-e[1]*e[2]<0&&(a=a?"0":"1");var s=[{x:n[5],y:n[6]}],l=(0,r.matrixTransform)(s,e);return i.isDegenerate?{command:"L",params:[l[0].x,l[0].y]}:{command:"A",params:[i.rx,i.ry,i.ax,n[3],a,l[0].x,l[0].y]}},C:function C(t,e,o){var i=[{x:n[0],y:n[1]},{x:n[2],y:n[3]},{x:n[4],y:n[5]}],a=(0,r.matrixTransform)(i,e);return{command:"C",params:[a[0].x,a[0].y,a[1].x,a[1].y,a[2].x,a[2].y]}},Z:function Z(t,e,o){return{command:"Z",params:[]}},default:function _default(t,e,o){var i=[{x:n[0],y:n[1]}],a=(0,r.matrixTransform)(i,e),s=t.params.slice(0,t.params.length);return s.splice(0,2,a[0].x,a[0].y),{command:t.command,params:s}}};return i[t.command]?i[t.command](t,e,o):i.default(t,e,o)},p=function verbosify(t,e){return function(o){var n="object"==typeof o?t.map(function(t){return o[t]}):arguments;return e.apply(null,n)}},d=function plus(t){return Path(o(e,t))};return{moveto:p(["x","y"],function(t,e){return d({command:"M",params:[t,e]})}),lineto:p(["x","y"],function(t,e){return d({command:"L",params:[t,e]})}),hlineto:p(["x"],function(t){return d({command:"H",params:[t]})}),vlineto:p(["y"],function(t){return d({command:"V",params:[t]})}),closepath:function closepath(){return d({command:"Z",params:[]})},curveto:p(["x1","y1","x2","y2","x","y"],function(t,e,o,n,r,i){return d({command:"C",params:[t,e,o,n,r,i]})}),smoothcurveto:p(["x2","y2","x","y"],function(t,e,o,n){return d({command:"S",params:[t,e,o,n]})}),qcurveto:p(["x1","y1","x","y"],function(t,e,o,n){return d({command:"Q",params:[t,e,o,n]})}),smoothqcurveto:p(["x","y"],function(t,e){return d({command:"T",params:[t,e]})}),arc:p(["rx","ry","xrot","largeArcFlag","sweepFlag","x","y"],function(t,e,o,n,r,i,a){return d({command:"A",params:[t,e,o,n,r,i,a]})}),translate:p(["dx","dy"],function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],o=arguments.length<=1||void 0===arguments[1]?0:arguments[1];if(0===t&&0===t)return Path(e);var n=function(){var n=[0,0],r=[1,0,0,1,t,o],i=e.map(function(t){var e=u(t,r,n);return n=c(t,n),e});return{v:Path(i)}}();return"object"==typeof n?n.v:void 0}),rotate:p(["angle","rx","ry"],function(t){var o=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];if(0===t)return Path(e);var r=function(){var r=void 0,i=void 0,a=e;0!==o&&0!==n&&(r=[0,0],i=[1,0,0,1,-o,-n],a=a.map(function(t){var e=u(t,i,r);return r=c(t,r),e}));var s=t*Math.PI/180,l=Math.cos(s),p=Math.sin(s);return r=[0,0],i=[l,p,-p,l,0,0],a=a.map(function(t){var e=u(t,i,r);return r=c(t,r),e}),0!==o&&0!==n&&(r=[0,0],i=[1,0,0,1,o,n],a=a.map(function(t){var e=u(t,i,r);return r=c(t,r),e})),{v:Path(a)}}();return"object"==typeof r?r.v:void 0}),scale:p(["sx","sy"],function(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0],o=arguments.length<=1||void 0===arguments[1]?t:arguments[1];return function(){if(1===t&&1===o)return Path(e);var n=function(){var n=[0,0],r=[t,0,0,o,0,0],i=e.map(function(t){var e=u(t,r,n);return n=c(t,n),e});return{v:Path(i)}}();return"object"==typeof n?n.v:void 0}()}),shearX:p(["angle"],function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];if(0===t)return Path(e);var o=function(){var o=[0,0],n=[1,0,Math.tan(t*Math.PI/180),1,0,0],r=e.map(function(t){var e=u(t,n,o);return o=c(t,o),e});return{v:Path(r)}}();return"object"==typeof o?o.v:void 0}),shearY:p(["angle"],function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];if(0===t)return Path(e);var o=function(){var o=[0,0],n=[1,Math.tan(t*Math.PI/180),0,1,0,0],r=e.map(function(t){var e=u(t,n,o);return o=c(t,o),e});return{v:Path(r)}}();return"object"==typeof o?o.v:void 0}),print:function print(){return e.map(l).join(" ")},toString:function toString(){return(void 0).print()},points:function points(){var t=[],o=[0,0],n=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value,u=c(l,o);o=u,u&&t.push(u)}}catch(t){r=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return t},instructions:function instructions(){return e.slice(0,e.length)},connect:function connect(t){var o=this.points(),n=o[o.length-1],r=t.points()[0],a=void 0;return"Z"!==e[e.length-1].command?(a=t.instructions().slice(1),i(n,r)||a.unshift({command:"L",params:r})):a=t.instructions(),Path(this.instructions().concat(a))}}};e.default=function(){return i()},t.exports=e.default},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function sliceIterator(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(o.push(a.value),!e||o.length!==e);n=!0);}catch(t){r=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return o}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return sliceIterator(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function sq(t){return t*t},i=function distPointToPoint(t,e){var o=n(t,2),i=o[0],a=o[1],s=n(e,2),l=s[0],c=s[1];return Math.sqrt(r(i-l)+r(a-c))},a=function distPointToParabol(t,e){var o=i(t,e);return 0==o?1/0:r(o)/(2*Math.abs(t[1]-e[1]))},s=function circumCenter(t,e,o){var n=(t[0]-o[0])*(e[1]-o[1])-(e[0]-o[0])*(t[1]-o[1]);return 0==n?[1/0,1/0]:[(((t[0]-o[0])*(t[0]+o[0])+(t[1]-o[1])*(t[1]+o[1]))/2*(e[1]-o[1])-((e[0]-o[0])*(e[0]+o[0])+(e[1]-o[1])*(e[1]+o[1]))/2*(t[1]-o[1]))/n,(((e[0]-o[0])*(e[0]+o[0])+(e[1]-o[1])*(e[1]+o[1]))/2*(t[0]-o[0])-((t[0]-o[0])*(t[0]+o[0])+(t[1]-o[1])*(t[1]+o[1]))/2*(e[0]-o[0]))/n]},l=function parabolsCrossX(t,e,o){if(t[1]===e[1])return[(t[0]+e[0])/2,(t[0]+e[0])/2];var n=(t[1]*e[0]-t[0]*e[1]+t[0]*o-e[0]*o+Math.sqrt((t[0]*t[0]+t[1]*t[1]-2*t[0]*e[0]+e[0]*e[0]-2*t[1]*e[1]+e[1]*e[1])*(t[1]*e[1]-t[1]*o-e[1]*o+o*o)))/(t[1]-e[1]),r=(t[1]*e[0]-t[0]*e[1]+t[0]*o-e[0]*o-Math.sqrt((t[0]*t[0]+t[1]*t[1]-2*t[0]*e[0]+e[0]*e[0]-2*t[1]*e[1]+e[1]*e[1])*(t[1]*e[1]-t[1]*o-e[1]*o+o*o)))/(t[1]-e[1]);return n<r?[n,r]:[r,n]},c=function doHalflinesCross(t,e){var o=arguments.length<=2||void 0===arguments[2]?1e-10:arguments[2],n=e.ps[0]-t.ps[0],r=e.ps[1]-t.ps[1];if(t.m==1/0)return t.hp*(e.m*n-r)<=o&&e.vec[0]*n<=o;if(e.m==1/0)return e.hp*(t.m*n-r)>=-o&&t.vec[0]*n>=-o;var i=e.vec[0]*t.vec[1]-e.vec[1]*t.vec[0];if(0===i)return!1;var a=(r*e.vec[0]-n*e.vec[1])/i,s=(r*t.vec[0]-n*t.vec[1])/i;return a>=-o&&s>=o||a>=o&&s>=-o},u=function matrixTransform(t,e){return t.map(function(t){return{x:t.x*e[0]+t.y*e[2]+e[4],y:t.x*e[1]+t.y*e[3]+e[5]}})},p=function transformEllipse(t,e,o,n){var r=Math.PI/180,i=Math.cos(o*r),a=Math.sin(o*r),s=[t*(n[0]*i+n[2]*a),t*(n[1]*i+n[3]*a),e*(-n[0]*a+n[2]*i),e*(-n[1]*a+n[3]*i)],l=s[0]*s[0]+s[2]*s[2],c=s[1]*s[1]+s[3]*s[3],u=((s[0]-s[3])*(s[0]-s[3])+(s[2]+s[1])*(s[2]+s[1]))*((s[0]+s[3])*(s[0]+s[3])+(s[2]-s[1])*(s[2]-s[1])),p=(l+c)/2;if(u<1e-10*p)return{rx:Math.sqrt(p),ry:Math.sqrt(p),ax:0,isDegenerate:!1};var d=s[0]*s[1]+s[2]*s[3];u=Math.sqrt(u);var f=p+u/2,h=p-u/2,g=void 0,y=void 0,m=void 0;return g=Math.abs(d)<1e-10&&Math.abs(f-c)<1e-10?90:180*Math.atan(Math.abs(d)>Math.abs(f-c)?(f-l)/d:d/(f-c))/Math.PI,g>=0?(y=Math.sqrt(f),m=Math.sqrt(h)):(g+=90,y=Math.sqrt(h),m=Math.sqrt(f)),{rx:y,ry:m,ax:g,isDegenerate:y<1e-10*m||m<1e-10*y}};e.default={distPointToPoint:i,distPointToParabol:a,circumCenter:s,parabolsCrossX:l,doHalflinesCross:c,matrixTransform:u,transformEllipse:p},t.exports=e.default},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(14),i=o(26),a=o(0),s=o(9),l=o(7),c=o(25),u=o(11),p=o(27),d=o(29),f=o(5),h=function(t){function DiagramEngine(){var e=t.call(this)||this;return e.canvasMatrix=[],e.routingMatrix=[],e.hAdjustmentFactor=0,e.vAdjustmentFactor=0,e.calculateMatrixDimensions=function(){var t=a.values(e.diagramModel.nodes).map(function(t){return{x:t.x,width:t.width,y:t.y,height:t.height}}),o=a.values(e.diagramModel.links),n=a.flatMap(o.map(function(t){return[t.sourcePort,t.targetPort]})).filter(function(t){return null!==t}).map(function(t){return{x:t.x,width:t.width,y:t.y,height:t.height}}),r=a.flatMap(o.map(function(t){return t.points})).map(function(t){return{x:t.x,width:0,y:t.y,height:0}}),i=e.canvas,s=Math.floor(Math.min(a.minBy(a.concat(t,n,r),function(t){return t.x}).x,0)/u.ROUTING_SCALING_FACTOR)*u.ROUTING_SCALING_FACTOR,l=a.maxBy(a.concat(t,n,r),function(t){return t.x+t.width}),c=Math.max(l.x+l.width,i.offsetWidth),p=Math.floor(Math.min(a.minBy(a.concat(t,n,r),function(t){return t.y}).y,0)/u.ROUTING_SCALING_FACTOR)*u.ROUTING_SCALING_FACTOR,d=a.maxBy(a.concat(t,n,r),function(t){return t.y+t.height}),f=Math.max(d.y+d.height,i.offsetHeight);return{width:Math.ceil(Math.abs(s)+c),hAdjustmentFactor:Math.abs(s)/u.ROUTING_SCALING_FACTOR+1,height:Math.ceil(Math.abs(p)+f),vAdjustmentFactor:Math.abs(p)/u.ROUTING_SCALING_FACTOR+1}},e.markNodes=function(t){a.values(e.diagramModel.nodes).forEach(function(o){for(var n=Math.floor(o.x/u.ROUTING_SCALING_FACTOR),r=Math.ceil((o.x+o.width)/u.ROUTING_SCALING_FACTOR),i=Math.floor(o.y/u.ROUTING_SCALING_FACTOR),a=Math.ceil((o.y+o.height)/u.ROUTING_SCALING_FACTOR),s=n-1;s<=r+1;s++)for(var l=i-1;l<a+1;l++)e.markMatrixPoint(t,e.translateRoutingX(s),e.translateRoutingY(l))})},e.markPorts=function(t){a.flatMap(a.values(e.diagramModel.links).map(function(t){return[].concat(t.sourcePort,t.targetPort)})).filter(function(t){return null!==t}).forEach(function(o){for(var n=Math.floor(o.x/u.ROUTING_SCALING_FACTOR),r=Math.ceil((o.x+o.width)/u.ROUTING_SCALING_FACTOR),i=Math.floor(o.y/u.ROUTING_SCALING_FACTOR),a=Math.ceil((o.y+o.height)/u.ROUTING_SCALING_FACTOR),s=n-1;s<=r+1;s++)for(var l=i-1;l<a+1;l++)e.markMatrixPoint(t,e.translateRoutingX(s),e.translateRoutingY(l))})},e.markMatrixPoint=function(t,e,o){void 0!==t[o]&&void 0!==t[o][e]&&(t[o][e]=1)},e.diagramModel=new i.DiagramModel,e.nodeFactories={},e.linkFactories={},e.portFactories={},e.labelFactories={},e.canvas=null,e.paintableWidgets=null,e.linksThatHaveInitiallyRendered={},f.Toolkit.TESTING&&(f.Toolkit.TESTING_UID=0,window&&(window.diagram_instance=e)),e}
//!-------------- FACTORIES ------------
return n(DiagramEngine,t),DiagramEngine.prototype.installDefaultFactories=function(){this.registerNodeFactory(new c.DefaultNodeFactory),this.registerLinkFactory(new c.DefaultLinkFactory),this.registerPortFactory(new p.DefaultPortFactory),this.registerLabelFactory(new d.DefaultLabelFactory)},DiagramEngine.prototype.repaintCanvas=function(){this.iterateListeners(function(t){t.repaintCanvas&&t.repaintCanvas()})},DiagramEngine.prototype.clearRepaintEntities=function(){this.paintableWidgets=null},DiagramEngine.prototype.enableRepaintEntities=function(t){var e=this;this.paintableWidgets={},t.forEach(function(t){t instanceof s.NodeModel&&a.forEach(t.getPorts(),function(t){a.forEach(t.getLinks(),function(t){e.paintableWidgets[t.getID()]=!0})}),t instanceof l.PointModel&&(e.paintableWidgets[t.getLink().getID()]=!0),e.paintableWidgets[t.getID()]=!0})},DiagramEngine.prototype.isModelLocked=function(t){return!!this.diagramModel.isLocked()||t.isLocked()},DiagramEngine.prototype.recalculatePortsVisually=function(){this.nodesRendered=!1,this.linksThatHaveInitiallyRendered={}},DiagramEngine.prototype.canEntityRepaint=function(t){return null===this.paintableWidgets||void 0!==this.paintableWidgets[t.getID()]},DiagramEngine.prototype.setCanvas=function(t){this.canvas=t},DiagramEngine.prototype.setDiagramModel=function(t){this.diagramModel=t,this.recalculatePortsVisually()},DiagramEngine.prototype.getDiagramModel=function(){return this.diagramModel},DiagramEngine.prototype.getNodeFactories=function(){return this.nodeFactories},DiagramEngine.prototype.getLinkFactories=function(){return this.linkFactories},DiagramEngine.prototype.getLabelFactories=function(){return this.labelFactories},DiagramEngine.prototype.registerLabelFactory=function(t){this.labelFactories[t.getType()]=t,this.iterateListeners(function(t){t.labelFactoriesUpdated&&t.labelFactoriesUpdated()})},DiagramEngine.prototype.registerPortFactory=function(t){this.portFactories[t.getType()]=t,this.iterateListeners(function(t){t.portFactoriesUpdated&&t.portFactoriesUpdated()})},DiagramEngine.prototype.registerNodeFactory=function(t){this.nodeFactories[t.getType()]=t,this.iterateListeners(function(t){t.nodeFactoriesUpdated&&t.nodeFactoriesUpdated()})},DiagramEngine.prototype.registerLinkFactory=function(t){this.linkFactories[t.getType()]=t,this.iterateListeners(function(t){t.linkFactoriesUpdated&&t.linkFactoriesUpdated()})},DiagramEngine.prototype.getPortFactory=function(t){if(this.portFactories[t])return this.portFactories[t];throw new Error("cannot find factory for port of type: ["+t+"]")},DiagramEngine.prototype.getNodeFactory=function(t){if(this.nodeFactories[t])return this.nodeFactories[t];throw new Error("cannot find factory for node of type: ["+t+"]")},DiagramEngine.prototype.getLinkFactory=function(t){if(this.linkFactories[t])return this.linkFactories[t];throw new Error("cannot find factory for link of type: ["+t+"]")},DiagramEngine.prototype.getLabelFactory=function(t){if(this.labelFactories[t])return this.labelFactories[t];throw new Error("cannot find factory for label of type: ["+t+"]")},DiagramEngine.prototype.getFactoryForNode=function(t){return this.getNodeFactory(t.getType())},DiagramEngine.prototype.getFactoryForLink=function(t){return this.getLinkFactory(t.getType())},DiagramEngine.prototype.getFactoryForLabel=function(t){return this.getLabelFactory(t.getType())},DiagramEngine.prototype.generateWidgetForLink=function(t){var e=this.getFactoryForLink(t);if(!e)throw new Error("Cannot find link factory for link: "+t.getType());return e.generateReactWidget(this,t)},DiagramEngine.prototype.generateWidgetForNode=function(t){var e=this.getFactoryForNode(t);if(!e)throw new Error("Cannot find widget factory for node: "+t.getType());return e.generateReactWidget(this,t)},DiagramEngine.prototype.getRelativeMousePoint=function(t){var e=this.getRelativePoint(t.clientX,t.clientY);return{x:(e.x-this.diagramModel.getOffsetX())/(this.diagramModel.getZoomLevel()/100),y:(e.y-this.diagramModel.getOffsetY())/(this.diagramModel.getZoomLevel()/100)}},DiagramEngine.prototype.getRelativePoint=function(t,e){var o=this.canvas.getBoundingClientRect();return{x:t-o.left,y:e-o.top}},DiagramEngine.prototype.getNodeElement=function(t){var e=this.canvas.querySelector('.node[data-nodeid="'+t.getID()+'"]');if(null===e)throw new Error("Cannot find Node element with nodeID: ["+t.getID()+"]");return e},DiagramEngine.prototype.getNodePortElement=function(t){var e=this.canvas.querySelector('.port[data-name="'+t.getName()+'"][data-nodeid="'+t.getParent().getID()+'"]');if(null===e)throw new Error("Cannot find Node Port element with nodeID: ["+t.getParent().getID()+"] and name: ["+t.getName()+"]");return e},DiagramEngine.prototype.getPortCenter=function(t){var e=this.getNodePortElement(t),o=e.getBoundingClientRect(),n=this.getRelativePoint(o.left,o.top);return{x:e.offsetWidth/2+(n.x-this.diagramModel.getOffsetX())/(this.diagramModel.getZoomLevel()/100),y:e.offsetHeight/2+(n.y-this.diagramModel.getOffsetY())/(this.diagramModel.getZoomLevel()/100)}},DiagramEngine.prototype.getPortCoords=function(t){var e=this.getNodePortElement(t),o=e.getBoundingClientRect(),n=this.canvas.getBoundingClientRect();return{x:(o.x-this.diagramModel.getOffsetX())/(this.diagramModel.getZoomLevel()/100)-n.left,y:(o.y-this.diagramModel.getOffsetY())/(this.diagramModel.getZoomLevel()/100)-n.top,width:o.width,height:o.height}},DiagramEngine.prototype.getNodeDimensions=function(t){if(!this.canvas)return{width:0,height:0};var e=this.getNodeElement(t),o=e.getBoundingClientRect();return{width:o.width,height:o.height}},DiagramEngine.prototype.getMaxNumberPointsPerLink=function(){return this.maxNumberPointsPerLink},DiagramEngine.prototype.setMaxNumberPointsPerLink=function(t){this.maxNumberPointsPerLink=t},DiagramEngine.prototype.isSmartRoutingEnabled=function(){return!!this.smartRouting},DiagramEngine.prototype.setSmartRoutingStatus=function(t){this.smartRouting=t},DiagramEngine.prototype.getCanvasMatrix=function(){return 0===this.canvasMatrix.length&&this.calculateCanvasMatrix(),this.canvasMatrix},DiagramEngine.prototype.calculateCanvasMatrix=function(){var t=this.calculateMatrixDimensions(),e=t.width,o=t.hAdjustmentFactor,n=t.height,r=t.vAdjustmentFactor;this.hAdjustmentFactor=o,this.vAdjustmentFactor=r;var i=Math.ceil(e/u.ROUTING_SCALING_FACTOR),s=Math.ceil(n/u.ROUTING_SCALING_FACTOR);this.canvasMatrix=a.range(0,s).map(function(){return new Array(i).fill(0)})},DiagramEngine.prototype.getRoutingMatrix=function(){return 0===this.routingMatrix.length&&this.calculateRoutingMatrix(),this.routingMatrix},DiagramEngine.prototype.calculateRoutingMatrix=function(){var t=a.cloneDeep(this.getCanvasMatrix());this.markNodes(t),this.markPorts(t),this.routingMatrix=t},DiagramEngine.prototype.translateRoutingX=function(t,e){return void 0===e&&(e=!1),t+this.hAdjustmentFactor*(e?-1:1)},DiagramEngine.prototype.translateRoutingY=function(t,e){return void 0===e&&(e=!1),t+this.vAdjustmentFactor*(e?-1:1)},DiagramEngine.prototype.zoomToFit=function(){var t=this.canvas.clientWidth/this.canvas.scrollWidth,e=this.canvas.clientHeight/this.canvas.scrollHeight,o=t<e?t:e;this.diagramModel.setZoomLevel(this.diagramModel.getZoomLevel()*o),this.diagramModel.setOffset(0,0),this.repaintCanvas()},DiagramEngine}(r.BaseEntity);e.DiagramEngine=h},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(2),i=o(33),a=o(34),s=o(22),l=function(t){function DefaultLinkFactory(){return t.call(this,"default")||this}return n(DefaultLinkFactory,t),DefaultLinkFactory.prototype.generateReactWidget=function(t,e){return r.createElement(i.DefaultLinkWidget,{link:e,diagramEngine:t})},DefaultLinkFactory.prototype.getNewInstance=function(t){return new s.DefaultLinkModel},DefaultLinkFactory.prototype.generateLinkSegment=function(t,e,o,n){return r.createElement("path",{className:o?e.bem("--path-selected"):"",strokeWidth:t.width,stroke:t.color,d:n})},DefaultLinkFactory}(a.AbstractLinkFactory);e.DefaultLinkFactory=l},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(32),i=o(2),a=o(35),s=o(38),l=function(t){function DefaultNodeFactory(){return t.call(this,"default")||this}return n(DefaultNodeFactory,t),DefaultNodeFactory.prototype.generateReactWidget=function(t,e){return i.createElement(a.DefaultNodeWidget,{node:e,diagramEngine:t})},DefaultNodeFactory.prototype.getNewInstance=function(t){return new r.DefaultNodeModel},DefaultNodeFactory}(s.AbstractNodeFactory);e.DefaultNodeFactory=l},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function __(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}(),r=this&&this.__assign||Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=o(2),a=o(0),s=o(42),l=o(44),c=o(5),u=o(39),p=o(40),d=o(41),f=o(9),h=o(7),g=o(15),y=o(3),m=function(t){function DiagramWidget(e){var o=t.call(this,"srd-diagram",e)||this;return o.onKeyUpPointer=null,o.onMouseMove=o.onMouseMove.bind(o),o.onMouseUp=o.onMouseUp.bind(o),o.state={action:null,wasMoved:!1,renderedNodes:!1,windowListener:null,diagramEngineListener:null,document:null},o}return n(DiagramWidget,t),DiagramWidget.prototype.componentWillUnmount=function(){this.props.diagramEngine.removeListener(this.state.diagramEngineListener),this.props.diagramEngine.setCanvas(null),window.removeEventListener("keyup",this.onKeyUpPointer),window.removeEventListener("mouseUp",this.onMouseUp),window.removeEventListener("mouseMove",this.onMouseMove)},DiagramWidget.prototype.componentWillReceiveProps=function(t){var e=this;if(this.props.diagramEngine!==t.diagramEngine){this.props.diagramEngine.removeListener(this.state.diagramEngineListener);var o=t.diagramEngine.addListener({repaintCanvas:function(){return e.forceUpdate()}});this.setState({diagramEngineListener:o})}},DiagramWidget.prototype.componentWillUpdate=function(t){this.props.diagramEngine.diagramModel.id!==t.diagramEngine.diagramModel.id&&(this.setState({renderedNodes:!1}),t.diagramEngine.diagramModel.rendered=!0),t.diagramEngine.diagramModel.rendered||(this.setState({renderedNodes:!1}),t.diagramEngine.diagramModel.rendered=!0)},DiagramWidget.prototype.componentDidUpdate=function(){this.state.renderedNodes||this.setState({renderedNodes:!0})},DiagramWidget.prototype.componentDidMount=function(){var t=this;this.onKeyUpPointer=this.onKeyUp.bind(this),this.setState({document:document,renderedNodes:!0,diagramEngineListener:this.props.diagramEngine.addListener({repaintCanvas:function(){t.forceUpdate()}})}),window.addEventListener("keyup",this.onKeyUpPointer,!1),"test"!==production&&window.focus()},DiagramWidget.prototype.getMouseElement=function(t){var e=t.target,o=this.props.diagramEngine.diagramModel,n=c.Toolkit.closest(e,".port[data-name]");if(n){var r=c.Toolkit.closest(e,".node[data-nodeid]");return{model:o.getNode(r.getAttribute("data-nodeid")).getPort(n.getAttribute("data-name")),element:n}}return(n=c.Toolkit.closest(e,".point[data-id]"))?{model:o.getLink(n.getAttribute("data-linkid")).getPointModel(n.getAttribute("data-id")),element:n}:(n=c.Toolkit.closest(e,"[data-linkid]"))?{model:o.getLink(n.getAttribute("data-linkid")),element:n}:(n=c.Toolkit.closest(e,".node[data-nodeid]"),n?{model:o.getNode(n.getAttribute("data-nodeid")),element:n}:null)},DiagramWidget.prototype.fireAction=function(){this.state.action&&this.props.actionStillFiring&&this.props.actionStillFiring(this.state.action)},DiagramWidget.prototype.stopFiringAction=function(t){this.props.actionStoppedFiring&&!t&&this.props.actionStoppedFiring(this.state.action),this.setState({action:null})},DiagramWidget.prototype.startFiringAction=function(t){var e=!0;this.props.actionStartedFiring&&(e=this.props.actionStartedFiring(t)),e&&this.setState({action:t})},DiagramWidget.prototype.onMouseMove=function(t){var e=this,o=this.props.diagramEngine,n=o.getDiagramModel();if(this.state.action instanceof d.SelectingAction){var r=o.getRelativePoint(t.clientX,t.clientY);return a.forEach(n.getNodes(),function(t){e.state.action.containsElement(t.x,t.y,n)&&t.setSelected(!0)}),a.forEach(n.getLinks(),function(t){var o=!0;a.forEach(t.points,function(t){e.state.action.containsElement(t.x,t.y,n)?t.setSelected(!0):o=!1}),o&&t.setSelected(!0)}),this.state.action.mouseX2=r.x,this.state.action.mouseY2=r.y,this.fireAction(),void this.setState({action:this.state.action})}if(this.state.action instanceof p.MoveItemsAction){var i=t.clientX-this.state.action.mouseX,s=t.clientY-this.state.action.mouseY,l=n.getZoomLevel()/100;a.forEach(this.state.action.selectionModels,function(t){t.model instanceof f.NodeModel||t.model instanceof h.PointModel&&!t.model.isConnectedToPort()?(t.model.x=n.getGridPosition(t.initialX+i/l),t.model.y=n.getGridPosition(t.initialY+s/l),t.model instanceof f.NodeModel&&a.forEach(t.model.getPorts(),function(t){var o=e.props.diagramEngine.getPortCoords(t);t.updateCoords(o)}),o.isSmartRoutingEnabled()&&o.calculateRoutingMatrix()):t.model instanceof h.PointModel&&(t.model.x=t.initialX+n.getGridPosition(i/l),t.model.y=t.initialY+n.getGridPosition(s/l))}),o.isSmartRoutingEnabled()&&o.calculateCanvasMatrix(),this.fireAction(),this.state.wasMoved?this.forceUpdate():this.setState({wasMoved:!0})}else this.state.action instanceof u.MoveCanvasAction&&this.props.allowCanvasTranslation&&(n.setOffset(this.state.action.initialOffsetX+(t.clientX-this.state.action.mouseX),this.state.action.initialOffsetY+(t.clientY-this.state.action.mouseY)),this.fireAction(),this.forceUpdate())},DiagramWidget.prototype.onKeyUp=function(t){var e=this;-1!==this.props.deleteKeys.indexOf(t.keyCode)&&(a.forEach(this.props.diagramEngine.getDiagramModel().getSelectedItems(),function(t){e.props.diagramEngine.isModelLocked(t)||t.remove()}),this.forceUpdate())},DiagramWidget.prototype.onMouseUp=function(t){var e=this,o=this.props.diagramEngine;if(this.state.action instanceof p.MoveItemsAction){var n=this.getMouseElement(t),r=!1;a.forEach(this.state.action.selectionModels,function(t){if(t.model instanceof h.PointModel){if(n&&n.model instanceof g.PortModel&&!o.isModelLocked(n.model)){r=!0;var i=t.model.getLink();if(null!==i.getTargetPort())if(i.getTargetPort()!==n.model&&i.getSourcePort()!==n.model){var a=i.getTargetPort(),s=i.clone({});s.setSourcePort(n.model),s.setTargetPort(a),i.setTargetPort(n.model),a.removeLink(i),s.removePointsBefore(s.getPoints()[i.getPointIndex(t.model)]),i.removePointsAfter(t.model),o.getDiagramModel().addLink(s)}else i.getTargetPort()===n.model?i.removePointsAfter(t.model):i.getSourcePort()===n.model&&i.removePointsBefore(t.model);else i.setTargetPort(n.model);delete e.props.diagramEngine.linksThatHaveInitiallyRendered[i.getID()]}(!e.props.allowLooseLinks&&n.model instanceof f.NodeModel||!e.state.wasMoved)&&(r=!0)}}),r||this.props.allowLooseLinks||a.forEach(this.state.action.selectionModels,function(t){if(t.model instanceof h.PointModel){var e=t.model.getLink();e.isLastPoint(t.model)&&e.remove()}}),a.forEach(this.state.action.selectionModels,function(t){if(t.model instanceof h.PointModel){var e=t.model.getLink(),o=e.getSourcePort(),n=e.getTargetPort();null!==o&&null!==n&&(o.canLinkToPort(n)?a.some(a.values(n.getLinks()),function(t){return t!==e&&(t.getSourcePort()===o||t.getTargetPort()===o)})&&e.remove():e.remove())}}),o.clearRepaintEntities(),this.stopFiringAction(!this.state.wasMoved)}else o.clearRepaintEntities(),this.stopFiringAction();this.state.document.removeEventListener("mousemove",this.onMouseMove),this.state.document.removeEventListener("mouseup",this.onMouseUp)},DiagramWidget.prototype.drawSelectionBox=function(){var t=this.state.action.getBoxDimensions();return i.createElement("div",{className:this.bem("__selector"),style:{top:t.top,left:t.left,width:t.width,height:t.height}})},DiagramWidget.prototype.render=function(){var t=this,e=this.props.diagramEngine;e.setMaxNumberPointsPerLink(this.props.maxNumberPointsPerLink),e.setSmartRoutingStatus(this.props.smartRouting);var o=e.getDiagramModel();return i.createElement("div",r({},this.getProps(),{ref:function(e){e&&t.props.diagramEngine.setCanvas(e)},onWheel:function(n){if(t.props.allowCanvasZoom){n.preventDefault(),n.stopPropagation();var r=o.getZoomLevel()/100,i=t.props.inverseZoom?-n.deltaY:n.deltaY;n.ctrlKey&&i%1!=0?i/=3:i/=60,o.getZoomLevel()+i>10&&o.setZoomLevel(o.getZoomLevel()+i);var a=o.getZoomLevel()/100,s=n.currentTarget.getBoundingClientRect(),l=s.width,c=s.height,u=l*a-l*r,p=c*a-c*r,d=n.clientX-s.left,f=n.clientY-s.top,h=(d-o.getOffsetX())/r/l,g=(f-o.getOffsetY())/r/c;o.setOffset(o.getOffsetX()-u*h,o.getOffsetY()-p*g),e.enableRepaintEntities([]),t.forceUpdate()}},onMouseDown:function(n){t.setState(r({},t.state,{wasMoved:!1})),e.clearRepaintEntities();var i=t.getMouseElement(n);if(null===i)if(n.shiftKey){var a=e.getRelativePoint(n.clientX,n.clientY);t.startFiringAction(new d.SelectingAction(a.x,a.y))}else o.clearSelection(),t.startFiringAction(new u.MoveCanvasAction(n.clientX,n.clientY,o));else if(i.model instanceof g.PortModel)if(t.props.diagramEngine.isModelLocked(i.model))o.clearSelection();else{var a=e.getRelativeMousePoint(n),s=i.model,l=s.createLinkModel();l.setSourcePort(s),l&&(l.removeMiddlePoints(),l.getSourcePort()!==s&&l.setSourcePort(s),l.setTargetPort(null),l.getFirstPoint().updateLocation(a),l.getLastPoint().updateLocation(a),o.clearSelection(),l.getLastPoint().setSelected(!0),o.addLink(l),t.startFiringAction(new p.MoveItemsAction(n.clientX,n.clientY,e)))}else n.shiftKey||i.model.isSelected()||o.clearSelection(),i.model.setSelected(!0),t.startFiringAction(new p.MoveItemsAction(n.clientX,n.clientY,e));t.state.document.addEventListener("mousemove",t.onMouseMove),t.state.document.addEventListener("mouseup",t.onMouseUp)}}),this.state.renderedNodes&&i.createElement(s.LinkLayerWidget,{diagramEngine:e,pointAdded:function(n,r){t.state.document.addEventListener("mousemove",t.onMouseMove),t.state.document.addEventListener("mouseup",t.onMouseUp),r.stopPropagation(),o.clearSelection(n),t.setState({action:new p.MoveItemsAction(r.clientX,r.clientY,e)})}}),i.createElement(l.NodeLayerWidget,{diagramEngine:e}),this.state.action instanceof d.SelectingAction&&this.drawSelectionBox())},DiagramWidget.defaultProps={diagramEngine:null,allowLooseLinks:!0,allowCanvasTranslation:!0,allowCanvasZoom:!0,inverseZoom:!1,maxNumberPointsPerLink:1/0,smartRouting:!1,deleteKeys:[46,8]},DiagramWidget}(y.BaseWidget);e.DiagramWidget=m}])});